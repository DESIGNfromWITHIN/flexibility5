<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Snippets' => 
    array (
      '8b9763c3cc8eb115cb3383e95bdec22b' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoResources","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\nif (isset($parents) && $parents === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\nif (!empty($returnIds)) {\\n\\t$scriptProperties[\'return\'] = \'ids\';\\n}\\n\\n\\/\\/ Adding extra parameters into special place so we can put them in results\\n\\/** @var modSnippet $snippet *\\/\\n$additionalPlaceholders = array();\\nif ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'pdoResources\'))) {\\n\\t$properties = $snippet->get(\'properties\');\\n\\tforeach ($scriptProperties as $k => $v) {\\n\\t\\tif (!isset($properties[$k])) {\\n\\t\\t\\t$additionalPlaceholders[$k] = $v;\\n\\t\\t}\\n\\t}\\n}\\n$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;\\n\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n$output = $pdoFetch->run();\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoResourcesLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($returnIds)) {\\n\\t$modx->setPlaceholder(\'pdoResources.log\', $log);\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}\\nelseif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array_merge($additionalPlaceholders, array(\'output\' => $output)), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:47:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:11:\\"publishedon\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"sortbyTV\\";a:7:{s:4:\\"name\\";s:8:\\"sortbyTV\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_sortbyTV\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"sortbyTVType\\";a:7:{s:4:\\"name\\";s:12:\\"sortbyTVType\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_sortbyTVType\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"sortdirTV\\";a:7:{s:4:\\"name\\";s:9:\\"sortdirTV\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_sortdirTV\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"tvFilters\\";a:7:{s:4:\\"name\\";s:9:\\"tvFilters\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_tvFilters\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"tvFiltersAndDelimiter\\";a:7:{s:4:\\"name\\";s:21:\\"tvFiltersAndDelimiter\\";s:4:\\"desc\\";s:35:\\"pdotools_prop_tvFiltersAndDelimiter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\",\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:20:\\"tvFiltersOrDelimiter\\";a:7:{s:4:\\"name\\";s:20:\\"tvFiltersOrDelimiter\\";s:4:\\"desc\\";s:34:\\"pdotools_prop_tvFiltersOrDelimiter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"||\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"idx\\";a:7:{s:4:\\"name\\";s:3:\\"idx\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_idx\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"first\\";a:7:{s:4:\\"name\\";s:5:\\"first\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_first\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"last\\";a:7:{s:4:\\"name\\";s:4:\\"last\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_last\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplFirst\\";a:7:{s:4:\\"name\\";s:8:\\"tplFirst\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplFirst\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplLast\\";a:7:{s:4:\\"name\\";s:7:\\"tplLast\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplLast\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplOdd\\";a:7:{s:4:\\"name\\";s:6:\\"tplOdd\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplOdd\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"totalVar\\";a:7:{s:4:\\"name\\";s:8:\\"totalVar\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_totalVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"total\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplCondition\\";a:7:{s:4:\\"name\\";s:12:\\"tplCondition\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplCondition\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplOperator\\";a:7:{s:4:\\"name\\";s:11:\\"tplOperator\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplOperator\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:10:{i:0;a:2:{s:4:\\"text\\";s:11:\\"is equal to\\";s:5:\\"value\\";s:2:\\"==\\";}i:1;a:2:{s:4:\\"text\\";s:15:\\"is not equal to\\";s:5:\\"value\\";s:2:\\"!=\\";}i:2;a:2:{s:4:\\"text\\";s:9:\\"less than\\";s:5:\\"value\\";s:1:\\"<\\";}i:3;a:2:{s:4:\\"text\\";s:21:\\"less than or equal to\\";s:5:\\"value\\";s:2:\\"<=\\";}i:4;a:2:{s:4:\\"text\\";s:24:\\"greater than or equal to\\";s:5:\\"value\\";s:2:\\">=\\";}i:5;a:2:{s:4:\\"text\\";s:8:\\"is empty\\";s:5:\\"value\\";s:5:\\"empty\\";}i:6;a:2:{s:4:\\"text\\";s:12:\\"is not empty\\";s:5:\\"value\\";s:6:\\"!empty\\";}i:7;a:2:{s:4:\\"text\\";s:7:\\"is null\\";s:5:\\"value\\";s:4:\\"null\\";}i:8;a:2:{s:4:\\"text\\";s:11:\\"is in array\\";s:5:\\"value\\";s:7:\\"inarray\\";}i:9;a:2:{s:4:\\"text\\";s:10:\\"is between\\";s:5:\\"value\\";s:7:\\"between\\";}}s:5:\\"value\\";s:2:\\"==\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"conditionalTpls\\";a:7:{s:4:\\"name\\";s:15:\\"conditionalTpls\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_conditionalTpls\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"select\\";a:7:{s:4:\\"name\\";s:6:\\"select\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_select\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:36:\\"pdotools_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"loadModels\\";a:7:{s:4:\\"name\\";s:10:\\"loadModels\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_loadModels\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdoresources.php","content":"\\/* @var array $scriptProperties *\\/\\nif (isset($parents) && $parents === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\nif (!empty($returnIds)) {\\n\\t$scriptProperties[\'return\'] = \'ids\';\\n}\\n\\n\\/\\/ Adding extra parameters into special place so we can put them in results\\n\\/** @var modSnippet $snippet *\\/\\n$additionalPlaceholders = array();\\nif ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'pdoResources\'))) {\\n\\t$properties = $snippet->get(\'properties\');\\n\\tforeach ($scriptProperties as $k => $v) {\\n\\t\\tif (!isset($properties[$k])) {\\n\\t\\t\\t$additionalPlaceholders[$k] = $v;\\n\\t\\t}\\n\\t}\\n}\\n$scriptProperties[\'additionalPlaceholders\'] = $additionalPlaceholders;\\n\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n$output = $pdoFetch->run();\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoResourcesLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($returnIds)) {\\n\\t$modx->setPlaceholder(\'pdoResources.log\', $log);\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}\\nelseif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array_merge($additionalPlaceholders, array(\'output\' => $output)), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => '2069611e1d5aa9b1f9d5724f2e3154d7',
        'native_key' => 0,
        'signature' => '1b01640b51466c77621d8aeb9a262242',
      ),
      '7e76c41a8516a7e6cfb39e0002f3ebf8' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoUsers","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n$class = \'modUser\';\\n$profile = \'modUserProfile\';\\n$member = \'modUserGroupMember\';\\n\\n\\/\\/ Start building \\"Where\\" expression\\n$where = array();\\nif (empty($showInactive)) {$where[$class.\'.active\'] = 1;}\\nif (empty($showBlocked)) {$where[$profile.\'.blocked\'] = 0;}\\n\\n\\/\\/ Add users profiles and groups\\n$innerJoin = array(\\n\\t$profile => array(\'alias\' => $profile, \'on\' => \\"$class.id = $profile.internalKey\\"),\\n);\\n\\n\\/\\/ Filter by users, groups and roles\\n$tmp = array(\\n\\t\'users\' => array(\\n\\t\\t\'class\' => $class,\\n\\t\\t\'name\' => \'username\',\\n\\t\\t\'join\' => $class.\'.id\',\\n\\t),\\n\\t\'groups\' => array(\\n\\t\\t\'class\' => \'modUserGroup\',\\n\\t\\t\'name\' => \'name\',\\n\\t\\t\'join\' => $member.\'.user_group\',\\n\\t),\\n\\t\'roles\' => array(\\n\\t\\t\'class\' => \'modUserGroupRole\',\\n\\t\\t\'name\' => \'name\',\\n\\t\\t\'join\' => $member.\'.role\',\\n\\t)\\n);\\nforeach ($tmp as $k => $p) {\\n\\tif (!empty($$k)) {\\n\\t\\t$$k = array_map(\'trim\', explode(\',\', $$k));\\n\\t\\t${$k.\'_in\'} = ${$k.\'_out\'} = $fetch_in = $fetch_out = array();\\n\\t\\tforeach ($$k as $v) {\\n\\t\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t\\tif ($v[0] == \'-\') {${$k.\'_out\'}[] = abs($v);}\\n\\t\\t\\t\\telse {${$k.\'_in\'}[] = abs($v);}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\tif ($v[0] == \'-\') {$fetch_out[] = $v;}\\n\\t\\t\\t\\telse {$fetch_in[] = $v;}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (!empty($fetch_in) || !empty($fetch_out)) {\\n\\t\\t\\t$q = $modx->newQuery($p[\'class\'], array($p[\'name\'].\':IN\' => array_merge($fetch_in, $fetch_out)));\\n\\t\\t\\t$q->select(\'id,\'.$p[\'name\']);\\n\\t\\t\\t$tstart = microtime(true);\\n\\t\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t\\twhile ($row = $q->stmt->fetch(PDO::FETCH_ASSOC)) {\\n\\t\\t\\t\\t\\tif (in_array($row[$p[\'name\']], $fetch_in)) {\\n\\t\\t\\t\\t\\t\\t${$k.\'_in\'}[] = $row[\'id\'];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t${$k.\'_out\'}[] = $row[\'id\'];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (!empty(${$k.\'_in\'})) {\\n\\t\\t\\t$where[$p[\'join\'].\':IN\'] = ${$k.\'_in\'};\\n\\t\\t}\\n\\t\\tif (!empty(${$k.\'_out\'})) {\\n\\t\\t\\t$where[$p[\'join\'].\':NOT IN\'] = ${$k.\'_out\'};\\n\\t\\t}\\n\\t}\\n}\\n\\nif (!empty($groups_in) || !empty($groups_out) || !empty($roles_in) || !empty($roles_out)) {\\n\\t$innerJoin[$member] = array(\'alias\' => $member, \'on\' => \\"$class.id = $member.member\\");\\n}\\n\\n\\/\\/ Fields to select\\n$select = array(\\n\\t$class => implode(\',\', array_keys($modx->getFieldMeta($class)))\\n\\t,$profile => implode(\',\', array_keys($modx->getFieldMeta($profile)))\\n);\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'innerJoin\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class.\'.id\',\\n\\t\'sortby\' => $class.\'.id\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'fastMode\' => false,\\n\\t\'return\' => !empty($returnIds) ? \'ids\' : \'chunks\',\\n\\t\'disableConditions\' => true\\n);\\n\\nif (!empty($users_in) && (empty($scriptProperties[\'sortby\']) || $scriptProperties[\'sortby\'] == $class.\'.id\')) {\\n\\t$scriptProperties[\'sortby\'] = \\"find_in_set(`$class`.`id`,\'\\".implode(\',\', $users_in).\\"\')\\";\\n\\t$scriptProperties[\'sortdir\'] = \'\';\\n}\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$output = $pdoFetch->run();\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoUsersLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($returnIds)) {\\n\\t$modx->setPlaceholder(\'pdoUsers.log\', $log);\\n\\treturn $output;\\n}\\nelseif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:30:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"modUser.id\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"groups\\";a:7:{s:4:\\"name\\";s:6:\\"groups\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_groups\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"roles\\";a:7:{s:4:\\"name\\";s:5:\\"roles\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_roles\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"users\\";a:7:{s:4:\\"name\\";s:5:\\"users\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_users\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"showInactive\\";a:7:{s:4:\\"name\\";s:12:\\"showInactive\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_showInactive\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showBlocked\\";a:7:{s:4:\\"name\\";s:11:\\"showBlocked\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showBlocked\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"idx\\";a:7:{s:4:\\"name\\";s:3:\\"idx\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_idx\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"first\\";a:7:{s:4:\\"name\\";s:5:\\"first\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_first\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"last\\";a:7:{s:4:\\"name\\";s:4:\\"last\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_last\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplFirst\\";a:7:{s:4:\\"name\\";s:8:\\"tplFirst\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplFirst\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplLast\\";a:7:{s:4:\\"name\\";s:7:\\"tplLast\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplLast\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplOdd\\";a:7:{s:4:\\"name\\";s:6:\\"tplOdd\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplOdd\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"totalVar\\";a:7:{s:4:\\"name\\";s:8:\\"totalVar\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_totalVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"total\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplCondition\\";a:7:{s:4:\\"name\\";s:12:\\"tplCondition\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplCondition\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplOperator\\";a:7:{s:4:\\"name\\";s:11:\\"tplOperator\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplOperator\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:10:{i:0;a:2:{s:4:\\"text\\";s:11:\\"is equal to\\";s:5:\\"value\\";s:2:\\"==\\";}i:1;a:2:{s:4:\\"text\\";s:15:\\"is not equal to\\";s:5:\\"value\\";s:2:\\"!=\\";}i:2;a:2:{s:4:\\"text\\";s:9:\\"less than\\";s:5:\\"value\\";s:1:\\"<\\";}i:3;a:2:{s:4:\\"text\\";s:21:\\"less than or equal to\\";s:5:\\"value\\";s:2:\\"<=\\";}i:4;a:2:{s:4:\\"text\\";s:24:\\"greater than or equal to\\";s:5:\\"value\\";s:2:\\">=\\";}i:5;a:2:{s:4:\\"text\\";s:8:\\"is empty\\";s:5:\\"value\\";s:5:\\"empty\\";}i:6;a:2:{s:4:\\"text\\";s:12:\\"is not empty\\";s:5:\\"value\\";s:6:\\"!empty\\";}i:7;a:2:{s:4:\\"text\\";s:7:\\"is null\\";s:5:\\"value\\";s:4:\\"null\\";}i:8;a:2:{s:4:\\"text\\";s:11:\\"is in array\\";s:5:\\"value\\";s:7:\\"inarray\\";}i:9;a:2:{s:4:\\"text\\";s:10:\\"is between\\";s:5:\\"value\\";s:7:\\"between\\";}}s:5:\\"value\\";s:2:\\"==\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"conditionalTpls\\";a:7:{s:4:\\"name\\";s:15:\\"conditionalTpls\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_conditionalTpls\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"select\\";a:7:{s:4:\\"name\\";s:6:\\"select\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_select\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:36:\\"pdotools_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdousers.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n$class = \'modUser\';\\n$profile = \'modUserProfile\';\\n$member = \'modUserGroupMember\';\\n\\n\\/\\/ Start building \\"Where\\" expression\\n$where = array();\\nif (empty($showInactive)) {$where[$class.\'.active\'] = 1;}\\nif (empty($showBlocked)) {$where[$profile.\'.blocked\'] = 0;}\\n\\n\\/\\/ Add users profiles and groups\\n$innerJoin = array(\\n\\t$profile => array(\'alias\' => $profile, \'on\' => \\"$class.id = $profile.internalKey\\"),\\n);\\n\\n\\/\\/ Filter by users, groups and roles\\n$tmp = array(\\n\\t\'users\' => array(\\n\\t\\t\'class\' => $class,\\n\\t\\t\'name\' => \'username\',\\n\\t\\t\'join\' => $class.\'.id\',\\n\\t),\\n\\t\'groups\' => array(\\n\\t\\t\'class\' => \'modUserGroup\',\\n\\t\\t\'name\' => \'name\',\\n\\t\\t\'join\' => $member.\'.user_group\',\\n\\t),\\n\\t\'roles\' => array(\\n\\t\\t\'class\' => \'modUserGroupRole\',\\n\\t\\t\'name\' => \'name\',\\n\\t\\t\'join\' => $member.\'.role\',\\n\\t)\\n);\\nforeach ($tmp as $k => $p) {\\n\\tif (!empty($$k)) {\\n\\t\\t$$k = array_map(\'trim\', explode(\',\', $$k));\\n\\t\\t${$k.\'_in\'} = ${$k.\'_out\'} = $fetch_in = $fetch_out = array();\\n\\t\\tforeach ($$k as $v) {\\n\\t\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t\\tif ($v[0] == \'-\') {${$k.\'_out\'}[] = abs($v);}\\n\\t\\t\\t\\telse {${$k.\'_in\'}[] = abs($v);}\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\tif ($v[0] == \'-\') {$fetch_out[] = $v;}\\n\\t\\t\\t\\telse {$fetch_in[] = $v;}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (!empty($fetch_in) || !empty($fetch_out)) {\\n\\t\\t\\t$q = $modx->newQuery($p[\'class\'], array($p[\'name\'].\':IN\' => array_merge($fetch_in, $fetch_out)));\\n\\t\\t\\t$q->select(\'id,\'.$p[\'name\']);\\n\\t\\t\\t$tstart = microtime(true);\\n\\t\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t\\twhile ($row = $q->stmt->fetch(PDO::FETCH_ASSOC)) {\\n\\t\\t\\t\\t\\tif (in_array($row[$p[\'name\']], $fetch_in)) {\\n\\t\\t\\t\\t\\t\\t${$k.\'_in\'}[] = $row[\'id\'];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t\\t${$k.\'_out\'}[] = $row[\'id\'];\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (!empty(${$k.\'_in\'})) {\\n\\t\\t\\t$where[$p[\'join\'].\':IN\'] = ${$k.\'_in\'};\\n\\t\\t}\\n\\t\\tif (!empty(${$k.\'_out\'})) {\\n\\t\\t\\t$where[$p[\'join\'].\':NOT IN\'] = ${$k.\'_out\'};\\n\\t\\t}\\n\\t}\\n}\\n\\nif (!empty($groups_in) || !empty($groups_out) || !empty($roles_in) || !empty($roles_out)) {\\n\\t$innerJoin[$member] = array(\'alias\' => $member, \'on\' => \\"$class.id = $member.member\\");\\n}\\n\\n\\/\\/ Fields to select\\n$select = array(\\n\\t$class => implode(\',\', array_keys($modx->getFieldMeta($class)))\\n\\t,$profile => implode(\',\', array_keys($modx->getFieldMeta($profile)))\\n);\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'innerJoin\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class.\'.id\',\\n\\t\'sortby\' => $class.\'.id\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'fastMode\' => false,\\n\\t\'return\' => !empty($returnIds) ? \'ids\' : \'chunks\',\\n\\t\'disableConditions\' => true\\n);\\n\\nif (!empty($users_in) && (empty($scriptProperties[\'sortby\']) || $scriptProperties[\'sortby\'] == $class.\'.id\')) {\\n\\t$scriptProperties[\'sortby\'] = \\"find_in_set(`$class`.`id`,\'\\".implode(\',\', $users_in).\\"\')\\";\\n\\t$scriptProperties[\'sortdir\'] = \'\';\\n}\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$output = $pdoFetch->run();\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoUsersLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($returnIds)) {\\n\\t$modx->setPlaceholder(\'pdoUsers.log\', $log);\\n\\treturn $output;\\n}\\nelseif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => '8d6ef34e888ff1aad915cd148e590c3a',
        'native_key' => 0,
        'signature' => 'ed1e88f9d439d331eb391fb9abe9b6e9',
      ),
      '89b0414e0169cc2324a01b252e3037f5' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoCrumbs","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (!isset($from) || $from == \'\') {$from = 0;}\\nif (empty($to)) {$to = $modx->resource->id;}\\nif (empty($direction)) {$direction = \'ltr\';}\\nif ($outputSeparator == \'&nbsp;&rarr;&nbsp;\' && $direction == \'rtl\') {$outputSeparator = \'&nbsp;&larr;&nbsp;\';}\\nif ($limit == \'\') {$limit = 10;}\\n\\/\\/ For compatibility with BreadCrumb\\nif (!empty($maxCrumbs)) {$limit = $maxCrumbs;}\\nif (!empty($containerTpl)) {$tplWrapper = $containerTpl;}\\nif (!empty($currentCrumbTpl)) {$tplCurrent = $currentCrumbTpl;}\\nif (!empty($linkCrumbTpl)) {$scriptProperties[\'tpl\'] = $linkCrumbTpl;}\\nif (!empty($maxCrumbTpl)) {$tplMax = $maxCrumbTpl;}\\nif (isset($showBreadCrumbsAtHome)) {$showAtHome = $showBreadCrumbsAtHome;}\\nif (isset($showHomeCrumb)) {$showHome = $showHomeCrumb;}\\nif (isset($showCurrentCrumb)) {$showCurrent = $showCurrentCrumb;}\\n\\/\\/ --\\n$fastMode = !empty($fastMode);\\n$siteStart = $modx->getOption(\'siteStart\', $scriptProperties, $modx->getOption(\'site_start\'));\\n\\nif (empty($showAtHome) && $modx->resource->id == $siteStart) {\\n\\treturn \'\';\\n}\\n\\n$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\');\\n\\/\\/ Start building \\"Where\\" expression\\n$where = array();\\nif (empty($showUnpublished) && empty($showUnPub)) {$where[\'published\'] = 1;}\\nif (empty($showHidden)) {$where[\'hidemenu\'] = 0;}\\nif (empty($showDeleted)) {$where[\'deleted\'] = 0;}\\nif (!empty($hideContainers) && empty($showContainer)) {$where[\'isfolder\'] = 0;}\\n\\n$resource = ($to == $modx->resource->id)\\n\\t? $modx->resource\\n\\t: $modx->getObject($class, $to);\\n\\nif (!$resource) {\\n\\t$message = \'Could not build breadcrumbs to resource \\"\'.$to.\'\\"\';\\n\\treturn \'\';\\n}\\n\\n$parents = $modx->getParentIds($resource->id, $limit, array(\'context\' => $resource->get(\'context_key\')));\\nif (!empty($showHome)) {\\n\\t$parents[] = $siteStart;\\n}\\n\\n$ids = array($resource->id);\\nforeach ($parents as $parent) {\\n\\tif (!empty($parent)) {\\n\\t\\t$ids[] = $parent;\\n\\t}\\n\\tif (!empty($from) && $parent == $from) {\\n\\t\\tbreak;\\n\\t}\\n}\\n$where[\'id:IN\'] = $ids;\\n\\nif (!empty($exclude)) {\\n\\t$where[\'id:NOT IN\'] = array_map(\'trim\', explode(\',\', $exclude));\\n}\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\n$select = array($class => implode(\',\',$resourceColumns));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class.\'.id\',\\n\\t\'sortby\' => \\"find_in_set(`$class`.`id`,\'\\".implode(\',\', $ids).\\"\')\\",\\n\\t\'sortdir\' => \'\',\\n\\t\'return\' => \'data\',\\n\\t\'totalVar\' => \'pdocrumbs.total\',\\n\\t\'disableConditions\' => true\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tif (strtolower($direction) == \'ltr\') {\\n\\t\\t$rows = array_reverse($rows);\\n\\t}\\n\\n\\tforeach ($rows as $row) {\\n\\t\\tif (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n\\t\\t\\t$row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n\\t\\t\\t\\t? $modx->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), \'\', \'\', $pdoFetch->config[\'scheme\'])\\n\\t\\t\\t\\t: $row[\'content\'];\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$row[\'link\'] = $modx->makeUrl($row[\'id\'], $row[\'context_key\'], \'\', $pdoFetch->config[\'scheme\']);\\n\\t\\t}\\n\\n\\t\\t$row = array_merge(\\n\\t\\t\\t$scriptProperties\\n\\t\\t\\t,$row\\n\\t\\t\\t,array(\'idx\' => $pdoFetch->idx++)\\n\\t\\t);\\n\\t\\tif (empty($row[\'menutitle\'])) {$row[\'menutitle\'] = $row[\'pagetitle\'];}\\n\\n\\t\\tif ($row[\'id\'] == $resource->id && empty($showCurrent)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\telseif ($row[\'id\'] == $resource->id && !empty($tplCurrent)) {\\n\\t\\t\\t$tpl = $tplCurrent;\\n\\t\\t}\\n\\t\\telseif ($row[\'id\'] == $siteStart && !empty($tplHome)) {\\n\\t\\t\\t$tpl = $tplHome;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t}\\n\\t\\t$output[] = empty($tpl)\\n\\t\\t\\t? \'<pre>\'.$pdoFetch->getChunk(\'\', $row).\'<\\/pre>\'\\n\\t\\t\\t: $pdoFetch->getChunk($tpl, $row, $fastMode);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Chunks processed\');\\n\\nif (count($output) == 1 && !empty($hideSingle)) {\\n\\t$pdoFetch->addTime(\'The only result was hidden, because the parameter \\"hideSingle\\" activated\');\\n\\t$output = array();\\n}\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoCrumbsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output = implode($outputSeparator, $output);\\n\\tif ($pdoFetch->idx >= $limit && !empty($tplMax) && !empty($output)) {\\n\\t\\t$output = ($direction == \'ltr\')\\n\\t\\t\\t? $pdoFetch->getChunk($tplMax, array(), $fastMode) . $output\\n\\t\\t\\t: $output . $pdoFetch->getChunk($tplMax, array(), $fastMode);\\n\\t}\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output, \'crumbs\' => $output), $fastMode);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:30:{s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"from\\";a:7:{s:4:\\"name\\";s:4:\\"from\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_from\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:2:\\"to\\";a:7:{s:4:\\"name\\";s:2:\\"to\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_to\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"exclude\\";a:7:{s:4:\\"name\\";s:7:\\"exclude\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_exclude\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"&nbsp;&rarr;&nbsp;\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:46:\\"@INLINE <a href=\\"[[+link]]\\">[[+menutitle]]<\\/a>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplCurrent\\";a:7:{s:4:\\"name\\";s:10:\\"tplCurrent\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplCurrent\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:35:\\"@INLINE <span>[[+menutitle]]<\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplMax\\";a:7:{s:4:\\"name\\";s:6:\\"tplMax\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplMax\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:36:\\"@INLINE <span>&nbsp;...&nbsp;<\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplHome\\";a:7:{s:4:\\"name\\";s:7:\\"tplHome\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplHome\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:50:\\"@INLINE <div class=\\"breadcrumbs\\">[[+output]]<\\/div>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showCurrent\\";a:7:{s:4:\\"name\\";s:11:\\"showCurrent\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showCurrent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"showHome\\";a:7:{s:4:\\"name\\";s:8:\\"showHome\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_showHome\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showAtHome\\";a:7:{s:4:\\"name\\";s:10:\\"showAtHome\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showAtHome\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"hideSingle\\";a:7:{s:4:\\"name\\";s:10:\\"hideSingle\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_hideSingle\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"direction\\";a:7:{s:4:\\"name\\";s:9:\\"direction\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_direction\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:5:\\"value\\";s:3:\\"ltr\\";s:4:\\"text\\";s:19:\\"Left To Right (ltr)\\";}i:1;a:2:{s:5:\\"value\\";s:3:\\"rtl\\";s:4:\\"text\\";s:19:\\"Right To Left (rtl)\\";}}s:5:\\"value\\";s:3:\\"ltr\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdocrumbs.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (!isset($from) || $from == \'\') {$from = 0;}\\nif (empty($to)) {$to = $modx->resource->id;}\\nif (empty($direction)) {$direction = \'ltr\';}\\nif ($outputSeparator == \'&nbsp;&rarr;&nbsp;\' && $direction == \'rtl\') {$outputSeparator = \'&nbsp;&larr;&nbsp;\';}\\nif ($limit == \'\') {$limit = 10;}\\n\\/\\/ For compatibility with BreadCrumb\\nif (!empty($maxCrumbs)) {$limit = $maxCrumbs;}\\nif (!empty($containerTpl)) {$tplWrapper = $containerTpl;}\\nif (!empty($currentCrumbTpl)) {$tplCurrent = $currentCrumbTpl;}\\nif (!empty($linkCrumbTpl)) {$scriptProperties[\'tpl\'] = $linkCrumbTpl;}\\nif (!empty($maxCrumbTpl)) {$tplMax = $maxCrumbTpl;}\\nif (isset($showBreadCrumbsAtHome)) {$showAtHome = $showBreadCrumbsAtHome;}\\nif (isset($showHomeCrumb)) {$showHome = $showHomeCrumb;}\\nif (isset($showCurrentCrumb)) {$showCurrent = $showCurrentCrumb;}\\n\\/\\/ --\\n$fastMode = !empty($fastMode);\\n$siteStart = $modx->getOption(\'siteStart\', $scriptProperties, $modx->getOption(\'site_start\'));\\n\\nif (empty($showAtHome) && $modx->resource->id == $siteStart) {\\n\\treturn \'\';\\n}\\n\\n$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\');\\n\\/\\/ Start building \\"Where\\" expression\\n$where = array();\\nif (empty($showUnpublished) && empty($showUnPub)) {$where[\'published\'] = 1;}\\nif (empty($showHidden)) {$where[\'hidemenu\'] = 0;}\\nif (empty($showDeleted)) {$where[\'deleted\'] = 0;}\\nif (!empty($hideContainers) && empty($showContainer)) {$where[\'isfolder\'] = 0;}\\n\\n$resource = ($to == $modx->resource->id)\\n\\t? $modx->resource\\n\\t: $modx->getObject($class, $to);\\n\\nif (!$resource) {\\n\\t$message = \'Could not build breadcrumbs to resource \\"\'.$to.\'\\"\';\\n\\treturn \'\';\\n}\\n\\n$parents = $modx->getParentIds($resource->id, $limit, array(\'context\' => $resource->get(\'context_key\')));\\nif (!empty($showHome)) {\\n\\t$parents[] = $siteStart;\\n}\\n\\n$ids = array($resource->id);\\nforeach ($parents as $parent) {\\n\\tif (!empty($parent)) {\\n\\t\\t$ids[] = $parent;\\n\\t}\\n\\tif (!empty($from) && $parent == $from) {\\n\\t\\tbreak;\\n\\t}\\n}\\n$where[\'id:IN\'] = $ids;\\n\\nif (!empty($exclude)) {\\n\\t$where[\'id:NOT IN\'] = array_map(\'trim\', explode(\',\', $exclude));\\n}\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\n$select = array($class => implode(\',\',$resourceColumns));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class.\'.id\',\\n\\t\'sortby\' => \\"find_in_set(`$class`.`id`,\'\\".implode(\',\', $ids).\\"\')\\",\\n\\t\'sortdir\' => \'\',\\n\\t\'return\' => \'data\',\\n\\t\'totalVar\' => \'pdocrumbs.total\',\\n\\t\'disableConditions\' => true\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tif (strtolower($direction) == \'ltr\') {\\n\\t\\t$rows = array_reverse($rows);\\n\\t}\\n\\n\\tforeach ($rows as $row) {\\n\\t\\tif (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n\\t\\t\\t$row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n\\t\\t\\t\\t? $modx->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), \'\', \'\', $pdoFetch->config[\'scheme\'])\\n\\t\\t\\t\\t: $row[\'content\'];\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$row[\'link\'] = $modx->makeUrl($row[\'id\'], $row[\'context_key\'], \'\', $pdoFetch->config[\'scheme\']);\\n\\t\\t}\\n\\n\\t\\t$row = array_merge(\\n\\t\\t\\t$scriptProperties\\n\\t\\t\\t,$row\\n\\t\\t\\t,array(\'idx\' => $pdoFetch->idx++)\\n\\t\\t);\\n\\t\\tif (empty($row[\'menutitle\'])) {$row[\'menutitle\'] = $row[\'pagetitle\'];}\\n\\n\\t\\tif ($row[\'id\'] == $resource->id && empty($showCurrent)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\telseif ($row[\'id\'] == $resource->id && !empty($tplCurrent)) {\\n\\t\\t\\t$tpl = $tplCurrent;\\n\\t\\t}\\n\\t\\telseif ($row[\'id\'] == $siteStart && !empty($tplHome)) {\\n\\t\\t\\t$tpl = $tplHome;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t}\\n\\t\\t$output[] = empty($tpl)\\n\\t\\t\\t? \'<pre>\'.$pdoFetch->getChunk(\'\', $row).\'<\\/pre>\'\\n\\t\\t\\t: $pdoFetch->getChunk($tpl, $row, $fastMode);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Chunks processed\');\\n\\nif (count($output) == 1 && !empty($hideSingle)) {\\n\\t$pdoFetch->addTime(\'The only result was hidden, because the parameter \\"hideSingle\\" activated\');\\n\\t$output = array();\\n}\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoCrumbsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output = implode($outputSeparator, $output);\\n\\tif ($pdoFetch->idx >= $limit && !empty($tplMax) && !empty($output)) {\\n\\t\\t$output = ($direction == \'ltr\')\\n\\t\\t\\t? $pdoFetch->getChunk($tplMax, array(), $fastMode) . $output\\n\\t\\t\\t: $output . $pdoFetch->getChunk($tplMax, array(), $fastMode);\\n\\t}\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output, \'crumbs\' => $output), $fastMode);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => 'c751075b117756f7f3139dfff28a9c7b',
        'native_key' => 0,
        'signature' => 'c153b756a71add85117e8deb2e1d9721',
      ),
      '2f2427576955b531403525cf15b6d86b' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoField","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\nif (!empty($input)) {$id = $input;}\\nif (!isset($default)) {$default = \'\';}\\nif (!isset($output)) {$output = \'\';}\\n$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\', true);\\n$isResource = $class == \'modResource\' || in_array($class, $modx->getDescendants(\'modResource\'));\\n\\nif (empty($field)) {$field = \'pagetitle\';}\\n$top = isset($top) ? intval($top) : 0;\\n$topLevel = isset($topLevel) ? intval($topLevel) : 0;\\nif (!empty($options)) {\\n\\t$options = trim($options);\\n\\tif ($options[0] == \'{\') {\\n\\t\\t$tmp = $modx->fromJSON($options);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\textract($tmp);\\n\\t\\t\\t$scriptProperties = array_merge($scriptProperties, $tmp);\\n\\t\\t}\\n\\t}\\n\\telse {\\n\\t\\t$field = $options;\\n\\t}\\n}\\nif (empty($id)) {\\n\\tif (!empty($modx->resource)) {\\n\\t\\t$id = $modx->resource->id;\\n\\t}\\n\\telse {\\n\\t\\treturn \'You must specify an id of \'.$class;\\n\\t}\\n}\\nif (!isset($context)) {$context = \'\';}\\n\\n\\/\\/ Gets the parent from root of context, if specified\\nif ($isResource && $id && ($top || $topLevel)) {\\n\\t\\/\\/ Select needed context for parents functionality\\n\\tif (empty($context)) {\\n\\t\\t$q = $modx->newQuery($class, $id);\\n\\t\\t$q->select(\'context_key\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t$context = $q->stmt->fetch(PDO::FETCH_COLUMN);\\n\\t\\t}\\n\\t}\\n\\t\\/\\/ Original pdoField logic\\n\\tif (empty($ultimate)) {\\n\\t\\tif ($topLevel) {\\n\\t\\t\\t$pids = $modx->getChildIds(0, $topLevel, array(\'context\' => $context));\\n\\t\\t\\t$pid = $id;\\n\\t\\t\\twhile (true) {\\n\\t\\t\\t\\t$tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));\\n\\t\\t\\t\\tif (!$pid = current($tmp)) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telseif (in_array($pid, $pids)) {\\n\\t\\t\\t\\t\\t$id = $pid;\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telseif ($top) {\\n\\t\\t\\t$pid = $id;\\n\\t\\t\\tfor ($i = 1; $i <= $top; $i++) {\\n\\t\\t\\t\\t$tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));\\n\\t\\t\\t\\tif (!$pid = current($tmp)) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$id = $pid;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\t\\/\\/ UltimateParent logic\\n\\t\\/\\/ https:\\/\\/github.com\\/splittingred\\/UltimateParent\\/blob\\/develop\\/core\\/components\\/ultimateparent\\/snippet.ultimateparent.php\\n\\telseif ($id != $top) {\\n\\t\\t$pid = $id;\\n\\t\\t$pids = $modx->getParentIds($id, 10, array(\'context\' => $context));\\n\\t\\tif (!$topLevel || count($pids) >= $topLevel) {\\n\\t\\t\\twhile ($parentIds= $modx->getParentIds($id, 1, array(\'context\' => $context))) {\\n\\t\\t\\t\\t$pid = array_pop($parentIds);\\n\\t\\t\\t\\tif ($pid == $top) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$id = $pid;\\n\\t\\t\\t\\t$parentIds = $modx->getParentIds($id, 10, array(\'context\' => $context));\\n\\t\\t\\t\\tif ($topLevel && count($parentIds) < $topLevel) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n$where = array($class.\'.id\' => $id);\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\n$field = strtolower($field);\\nif (in_array($field, $resourceColumns)) {\\n\\t$scriptProperties[\'select\'] = array($class => $field);\\n\\t$scriptProperties[\'includeTVs\'] = \'\';\\n}\\nelseif ($isResource) {\\n\\t$scriptProperties[\'select\'] = array($class => \'id\');\\n\\t$scriptProperties[\'includeTVs\'] = $field;\\n}\\n\\/\\/ Additional default field\\nif (!empty($default)) {\\n\\t$default = strtolower($default);\\n\\tif (in_array($default, $resourceColumns)) {\\n\\t\\t$scriptProperties[\'select\'][$class] .= \',\'.$default;\\n\\t}\\n\\telseif ($isResource) {\\n\\t\\t$scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])\\n\\t\\t\\t? $default\\n\\t\\t\\t: $scriptProperties[\'includeTVs\'] . \',\' . $default;\\n\\t}\\n}\\n\\n$scriptProperties[\'disableConditions\'] = true;\\nif ($row = $pdoFetch->getObject($class, $where, $scriptProperties)) {\\n\\tforeach ($row as $k => $v) {\\n\\t\\tif (strtolower($k) == $field && $v != \'\') {\\n\\t\\t\\t$output = $v;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n\\n\\tif (empty($output) && !empty($default)) {\\n\\t\\tforeach ($row as $k => $v) {\\n\\t\\t\\tif (strtolower($k) == $default && $v != \'\') {\\n\\t\\t\\t\\t$output = $v;\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}","locked":0,"properties":"a:12:{s:2:\\"id\\";a:7:{s:4:\\"name\\";s:2:\\"id\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_id\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"field\\";a:7:{s:4:\\"name\\";s:5:\\"field\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_field\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"pagetitle\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_field_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"top\\";a:7:{s:4:\\"name\\";s:3:\\"top\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_top\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"topLevel\\";a:7:{s:4:\\"name\\";s:8:\\"topLevel\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_topLevel\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"default\\";a:7:{s:4:\\"name\\";s:7:\\"default\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_field_default\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"output\\";a:7:{s:4:\\"name\\";s:6:\\"output\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_field_output\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"ultimate\\";a:7:{s:4:\\"name\\";s:8:\\"ultimate\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_ultimate\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdofield.php","content":"\\/* @var array $scriptProperties *\\/\\nif (!empty($input)) {$id = $input;}\\nif (!isset($default)) {$default = \'\';}\\nif (!isset($output)) {$output = \'\';}\\n$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\', true);\\n$isResource = $class == \'modResource\' || in_array($class, $modx->getDescendants(\'modResource\'));\\n\\nif (empty($field)) {$field = \'pagetitle\';}\\n$top = isset($top) ? intval($top) : 0;\\n$topLevel = isset($topLevel) ? intval($topLevel) : 0;\\nif (!empty($options)) {\\n\\t$options = trim($options);\\n\\tif ($options[0] == \'{\') {\\n\\t\\t$tmp = $modx->fromJSON($options);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\textract($tmp);\\n\\t\\t\\t$scriptProperties = array_merge($scriptProperties, $tmp);\\n\\t\\t}\\n\\t}\\n\\telse {\\n\\t\\t$field = $options;\\n\\t}\\n}\\nif (empty($id)) {\\n\\tif (!empty($modx->resource)) {\\n\\t\\t$id = $modx->resource->id;\\n\\t}\\n\\telse {\\n\\t\\treturn \'You must specify an id of \'.$class;\\n\\t}\\n}\\nif (!isset($context)) {$context = \'\';}\\n\\n\\/\\/ Gets the parent from root of context, if specified\\nif ($isResource && $id && ($top || $topLevel)) {\\n\\t\\/\\/ Select needed context for parents functionality\\n\\tif (empty($context)) {\\n\\t\\t$q = $modx->newQuery($class, $id);\\n\\t\\t$q->select(\'context_key\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->queryTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t$context = $q->stmt->fetch(PDO::FETCH_COLUMN);\\n\\t\\t}\\n\\t}\\n\\t\\/\\/ Original pdoField logic\\n\\tif (empty($ultimate)) {\\n\\t\\tif ($topLevel) {\\n\\t\\t\\t$pids = $modx->getChildIds(0, $topLevel, array(\'context\' => $context));\\n\\t\\t\\t$pid = $id;\\n\\t\\t\\twhile (true) {\\n\\t\\t\\t\\t$tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));\\n\\t\\t\\t\\tif (!$pid = current($tmp)) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telseif (in_array($pid, $pids)) {\\n\\t\\t\\t\\t\\t$id = $pid;\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telseif ($top) {\\n\\t\\t\\t$pid = $id;\\n\\t\\t\\tfor ($i = 1; $i <= $top; $i++) {\\n\\t\\t\\t\\t$tmp = $modx->getParentIds($pid, 1, array(\'context\' => $context));\\n\\t\\t\\t\\tif (!$pid = current($tmp)) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$id = $pid;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\t\\/\\/ UltimateParent logic\\n\\t\\/\\/ https:\\/\\/github.com\\/splittingred\\/UltimateParent\\/blob\\/develop\\/core\\/components\\/ultimateparent\\/snippet.ultimateparent.php\\n\\telseif ($id != $top) {\\n\\t\\t$pid = $id;\\n\\t\\t$pids = $modx->getParentIds($id, 10, array(\'context\' => $context));\\n\\t\\tif (!$topLevel || count($pids) >= $topLevel) {\\n\\t\\t\\twhile ($parentIds= $modx->getParentIds($id, 1, array(\'context\' => $context))) {\\n\\t\\t\\t\\t$pid = array_pop($parentIds);\\n\\t\\t\\t\\tif ($pid == $top) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$id = $pid;\\n\\t\\t\\t\\t$parentIds = $modx->getParentIds($id, 10, array(\'context\' => $context));\\n\\t\\t\\t\\tif ($topLevel && count($parentIds) < $topLevel) {\\n\\t\\t\\t\\t\\tbreak;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n$where = array($class.\'.id\' => $id);\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\n$field = strtolower($field);\\nif (in_array($field, $resourceColumns)) {\\n\\t$scriptProperties[\'select\'] = array($class => $field);\\n\\t$scriptProperties[\'includeTVs\'] = \'\';\\n}\\nelseif ($isResource) {\\n\\t$scriptProperties[\'select\'] = array($class => \'id\');\\n\\t$scriptProperties[\'includeTVs\'] = $field;\\n}\\n\\/\\/ Additional default field\\nif (!empty($default)) {\\n\\t$default = strtolower($default);\\n\\tif (in_array($default, $resourceColumns)) {\\n\\t\\t$scriptProperties[\'select\'][$class] .= \',\'.$default;\\n\\t}\\n\\telseif ($isResource) {\\n\\t\\t$scriptProperties[\'includeTVs\'] = empty($scriptProperties[\'includeTVs\'])\\n\\t\\t\\t? $default\\n\\t\\t\\t: $scriptProperties[\'includeTVs\'] . \',\' . $default;\\n\\t}\\n}\\n\\n$scriptProperties[\'disableConditions\'] = true;\\nif ($row = $pdoFetch->getObject($class, $where, $scriptProperties)) {\\n\\tforeach ($row as $k => $v) {\\n\\t\\tif (strtolower($k) == $field && $v != \'\') {\\n\\t\\t\\t$output = $v;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n\\n\\tif (empty($output) && !empty($default)) {\\n\\t\\tforeach ($row as $k => $v) {\\n\\t\\t\\tif (strtolower($k) == $default && $v != \'\') {\\n\\t\\t\\t\\t$output = $v;\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}"}',
        'guid' => 'f25830f2c4b040f85e520c4fc6234f43',
        'native_key' => 0,
        'signature' => 'cb0fe3042b0936e05487bcdb1fa7e95c',
      ),
      '78578005f721837ccb14097fec5f84ed' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoSitemap","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n\\/\\/ Default variables\\nif (empty($tpl)) {$tpl = \\"@INLINE \\\\n<url>\\\\n\\\\t<loc>[[+url]]<\\/loc>\\\\n\\\\t<lastmod>[[+date]]<\\/lastmod>\\\\n\\\\t<changefreq>[[+update]]<\\/changefreq>\\\\n\\\\t<priority>[[+priority]]<\\/priority>\\\\n<\\/url>\\";}\\nif (empty($tplWrapper)) {$tplWrapper = \\"@INLINE <?xml version=\\\\\\"1.0\\\\\\" encoding=\\\\\\"[[++modx_charset]]\\\\\\"\\\\n<urlset xmlns=\\\\\\"[[+schema]]\\\\\\">\\\\n[[+output]]\\\\n<\\/urlset>\\";}\\nif (empty($sitemapSchema)) {$sitemapSchema = \'http:\\/\\/www.sitemaps.org\\/schemas\\/sitemap\\/0.9\';}\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n\\n\\/\\/ Convert parameters from GoogleSiteMap if exists\\nif (!empty($itemTpl)) {$tpl = $itemTpl;}\\nif (!empty($containerTpl)) {$tplWrapper = $containerTpl;}\\nif (!empty($allowedtemplates)) {$scriptProperties[\'templates\'] = $allowedtemplates;}\\nif (!empty($maxDepth)) {$scriptProperties[\'depth\'] = $maxDepth;}\\nif (isset($hideDeleted)) {$scriptProperties[\'showDeleted\'] = !$hideDeleted;}\\nif (isset($published)) {$scriptProperties[\'showUnpublished\'] = !$published;}\\nif (isset($searchable)) {$scriptProperties[\'showUnsearchable\'] = !$searchable;}\\nif (!empty($googleSchema)) {$sitemapSchema = $googleSchema;}\\nif (!empty($excludeResources)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $excludeResources));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'resources\'])) {\\n\\t\\t\\t$scriptProperties[\'resources\'] .= \',-\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'resources\'] = \'-\'.$v;\\n\\t\\t}\\n\\t}\\n}\\nif (!empty($excludeChildrenOf)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $excludeChildrenOf));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'parents\'])) {\\n\\t\\t\\t$scriptProperties[\'parents\'] .= \',-\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'parents\'] = \'-\'.$v;\\n\\t\\t}\\n\\t}\\n}\\nif (!empty($startId)) {\\n\\tif (!empty($scriptProperties[\'parents\'])) {\\n\\t\\t$scriptProperties[\'parents\'] .= \',\'.$startId;\\n\\t}\\n\\telse {\\n\\t\\t$scriptProperties[\'parents\'] = $startId;\\n\\t}\\n}\\nif (!empty($sortBy)) {$scriptProperties[\'sortby\'] = $sortBy;}\\nif (!empty($sortDir)) {$scriptProperties[\'sortdir\'] = $sortDir;}\\nif (!empty($priorityTV)) {\\n\\tif (!empty($scriptProperties[\'includeTVs\'])) {\\n\\t\\t$scriptProperties[\'includeTVs\'] .= \',\'.$priorityTV;\\n\\t}\\n\\telse {\\n\\t\\t$scriptProperties[\'includeTVs\'] = $priorityTV;\\n\\t}\\n}\\nif (!empty($itemSeparator)) {$outputSeparator = $itemSeparator;}\\n\\/\\/---\\n\\n\\n$class = \'modResource\';\\n$where = array();\\nif (empty($showHidden)) {\\n\\t$where[] = array(\\n\\t\\t$class.\'.hidemenu\' => 0,\\n\\t\\t\'OR:\'.$class.\'.class_key:IN\' => array(\'Ticket\',\'Article\')\\n\\t);\\n}\\nif (empty($context)) {\\n\\t$scriptProperties[\'context\'] = $modx->context->key;\\n}\\n\\n$select = array($class => \'id,editedon,createdon,context_key,class_key\');\\nif (!empty($useWeblinkUrl)) {$select[$class] .= \',content\';}\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => $class.\'.menuindex\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'return\' => \'data\',\\n\\t\'scheme\' => \'full\',\\n\\t\'limit\' => 0,\\n\\t\\/\\/\'checkPermissions\' => \'load\',\\n\\t\'fastMode\' => true\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$now = time();\\n$output = array();\\nforeach ($rows as $row) {\\n\\tif (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n\\t\\t$row[\'url\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n\\t\\t\\t? $modx->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), \'\', \'\', $pdoFetch->config[\'scheme\'])\\n\\t\\t\\t: $row[\'content\'];\\n\\t}\\n\\telse {\\n\\t\\t$row[\'url\'] = $modx->makeUrl($row[\'id\'], $row[\'context_key\'], \'\', $pdoFetch->config[\'scheme\']);\\n\\t}\\n\\n\\t$time = !empty($row[\'editedon\'])\\n\\t\\t? $row[\'editedon\']\\n\\t\\t: $row[\'createdon\'];\\n\\t$row[\'date\'] = date(\'Y-m-d\', $time);\\n\\n\\t$datediff = floor(($now - $time) \\/ 86400);\\n\\tif ($datediff <= 1) {\\n\\t\\t$row[\'priority\'] = \'1.0\';\\n\\t\\t$row[\'update\'] = \'daily\';\\n\\t} elseif (($datediff > 1) && ($datediff <= 7)) {\\n\\t\\t$row[\'priority\'] = \'0.75\';\\n\\t\\t$row[\'update\'] = \'weekly\';\\n\\t} elseif (($datediff > 7) && ($datediff <= 30)) {\\n\\t\\t$row[\'priority\'] = \'0.50\';\\n\\t\\t$row[\'update\'] = \'weekly\';\\n\\t} else {\\n\\t\\t$row[\'priority\'] = \'0.25\';\\n\\t\\t$row[\'update\'] = \'monthly\';\\n\\t}\\n\\n\\tif (!empty($priorityTV) && !empty($row[$priorityTV])) {\\n\\t\\t$row[\'priority\'] = $row[$priorityTV];\\n\\t}\\n\\t\\/* add item to output *\\/\\n\\t$output[] = preg_replace(\'\\/\\\\[\\\\[.*?\\\\]\\\\]\\/\', \'\', $pdoFetch->parseChunk($tpl, $row));\\n}\\n$pdoFetch->addTime(\'Rows processed\');\\n\\n$output = implode($outputSeparator, $output);\\n$output = $pdoFetch->getChunk($tplWrapper, array(\\n\\t\'schema\' => $sitemapSchema,\\n\\t\'output\' => $output,\\n\\t\'items\' => $output\\n));\\n$pdoFetch->addTime(\'Rows wrapped\');\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"pdoSitemapLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($forceXML)) {\\n\\theader(\\"Content-Type:text\\/xml\\");\\n\\techo $output;\\n\\t@session_write_close();\\n\\texit();\\n}\\nelse {\\n\\treturn $output;\\n}","locked":0,"properties":"a:21:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:145:\\"@INLINE <url>\\n\\t<loc>[[+url]]<\\/loc>\\n\\t<lastmod>[[+date]]<\\/lastmod>\\n\\t<changefreq>[[+update]]<\\/changefreq>\\n\\t<priority>[[+priority]]<\\/priority>\\n<\\/url>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:110:\\"@INLINE <?xml version=\\"1.0\\" encoding=\\"[[++modx_charset]]\\"?>\\n<urlset xmlns=\\"[[+schema]]\\">\\n[[+output]]\\n<\\/urlset>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"templates\\";a:7:{s:4:\\"name\\";s:9:\\"templates\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_templates\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"sitemapSchema\\";a:7:{s:4:\\"name\\";s:13:\\"sitemapSchema\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_sitemapSchema\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:43:\\"http:\\/\\/www.sitemaps.org\\/schemas\\/sitemap\\/0.9\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"hideUnsearchable\\";a:7:{s:4:\\"name\\";s:16:\\"hideUnsearchable\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_hideUnsearchable\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"menuindex\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"asc\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"forceXML\\";a:7:{s:4:\\"name\\";s:8:\\"forceXML\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_forceXML\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdositemap.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n\\/\\/ Default variables\\nif (empty($tpl)) {$tpl = \\"@INLINE \\\\n<url>\\\\n\\\\t<loc>[[+url]]<\\/loc>\\\\n\\\\t<lastmod>[[+date]]<\\/lastmod>\\\\n\\\\t<changefreq>[[+update]]<\\/changefreq>\\\\n\\\\t<priority>[[+priority]]<\\/priority>\\\\n<\\/url>\\";}\\nif (empty($tplWrapper)) {$tplWrapper = \\"@INLINE <?xml version=\\\\\\"1.0\\\\\\" encoding=\\\\\\"[[++modx_charset]]\\\\\\"\\\\n<urlset xmlns=\\\\\\"[[+schema]]\\\\\\">\\\\n[[+output]]\\\\n<\\/urlset>\\";}\\nif (empty($sitemapSchema)) {$sitemapSchema = \'http:\\/\\/www.sitemaps.org\\/schemas\\/sitemap\\/0.9\';}\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n\\n\\/\\/ Convert parameters from GoogleSiteMap if exists\\nif (!empty($itemTpl)) {$tpl = $itemTpl;}\\nif (!empty($containerTpl)) {$tplWrapper = $containerTpl;}\\nif (!empty($allowedtemplates)) {$scriptProperties[\'templates\'] = $allowedtemplates;}\\nif (!empty($maxDepth)) {$scriptProperties[\'depth\'] = $maxDepth;}\\nif (isset($hideDeleted)) {$scriptProperties[\'showDeleted\'] = !$hideDeleted;}\\nif (isset($published)) {$scriptProperties[\'showUnpublished\'] = !$published;}\\nif (isset($searchable)) {$scriptProperties[\'showUnsearchable\'] = !$searchable;}\\nif (!empty($googleSchema)) {$sitemapSchema = $googleSchema;}\\nif (!empty($excludeResources)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $excludeResources));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'resources\'])) {\\n\\t\\t\\t$scriptProperties[\'resources\'] .= \',-\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'resources\'] = \'-\'.$v;\\n\\t\\t}\\n\\t}\\n}\\nif (!empty($excludeChildrenOf)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $excludeChildrenOf));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'parents\'])) {\\n\\t\\t\\t$scriptProperties[\'parents\'] .= \',-\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'parents\'] = \'-\'.$v;\\n\\t\\t}\\n\\t}\\n}\\nif (!empty($startId)) {\\n\\tif (!empty($scriptProperties[\'parents\'])) {\\n\\t\\t$scriptProperties[\'parents\'] .= \',\'.$startId;\\n\\t}\\n\\telse {\\n\\t\\t$scriptProperties[\'parents\'] = $startId;\\n\\t}\\n}\\nif (!empty($sortBy)) {$scriptProperties[\'sortby\'] = $sortBy;}\\nif (!empty($sortDir)) {$scriptProperties[\'sortdir\'] = $sortDir;}\\nif (!empty($priorityTV)) {\\n\\tif (!empty($scriptProperties[\'includeTVs\'])) {\\n\\t\\t$scriptProperties[\'includeTVs\'] .= \',\'.$priorityTV;\\n\\t}\\n\\telse {\\n\\t\\t$scriptProperties[\'includeTVs\'] = $priorityTV;\\n\\t}\\n}\\nif (!empty($itemSeparator)) {$outputSeparator = $itemSeparator;}\\n\\/\\/---\\n\\n\\n$class = \'modResource\';\\n$where = array();\\nif (empty($showHidden)) {\\n\\t$where[] = array(\\n\\t\\t$class.\'.hidemenu\' => 0,\\n\\t\\t\'OR:\'.$class.\'.class_key:IN\' => array(\'Ticket\',\'Article\')\\n\\t);\\n}\\nif (empty($context)) {\\n\\t$scriptProperties[\'context\'] = $modx->context->key;\\n}\\n\\n$select = array($class => \'id,editedon,createdon,context_key,class_key\');\\nif (!empty($useWeblinkUrl)) {$select[$class] .= \',content\';}\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => $class.\'.menuindex\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'return\' => \'data\',\\n\\t\'scheme\' => \'full\',\\n\\t\'limit\' => 0,\\n\\t\\/\\/\'checkPermissions\' => \'load\',\\n\\t\'fastMode\' => true\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$now = time();\\n$output = array();\\nforeach ($rows as $row) {\\n\\tif (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n\\t\\t$row[\'url\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n\\t\\t\\t? $modx->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), \'\', \'\', $pdoFetch->config[\'scheme\'])\\n\\t\\t\\t: $row[\'content\'];\\n\\t}\\n\\telse {\\n\\t\\t$row[\'url\'] = $modx->makeUrl($row[\'id\'], $row[\'context_key\'], \'\', $pdoFetch->config[\'scheme\']);\\n\\t}\\n\\n\\t$time = !empty($row[\'editedon\'])\\n\\t\\t? $row[\'editedon\']\\n\\t\\t: $row[\'createdon\'];\\n\\t$row[\'date\'] = date(\'Y-m-d\', $time);\\n\\n\\t$datediff = floor(($now - $time) \\/ 86400);\\n\\tif ($datediff <= 1) {\\n\\t\\t$row[\'priority\'] = \'1.0\';\\n\\t\\t$row[\'update\'] = \'daily\';\\n\\t} elseif (($datediff > 1) && ($datediff <= 7)) {\\n\\t\\t$row[\'priority\'] = \'0.75\';\\n\\t\\t$row[\'update\'] = \'weekly\';\\n\\t} elseif (($datediff > 7) && ($datediff <= 30)) {\\n\\t\\t$row[\'priority\'] = \'0.50\';\\n\\t\\t$row[\'update\'] = \'weekly\';\\n\\t} else {\\n\\t\\t$row[\'priority\'] = \'0.25\';\\n\\t\\t$row[\'update\'] = \'monthly\';\\n\\t}\\n\\n\\tif (!empty($priorityTV) && !empty($row[$priorityTV])) {\\n\\t\\t$row[\'priority\'] = $row[$priorityTV];\\n\\t}\\n\\t\\/* add item to output *\\/\\n\\t$output[] = preg_replace(\'\\/\\\\[\\\\[.*?\\\\]\\\\]\\/\', \'\', $pdoFetch->parseChunk($tpl, $row));\\n}\\n$pdoFetch->addTime(\'Rows processed\');\\n\\n$output = implode($outputSeparator, $output);\\n$output = $pdoFetch->getChunk($tplWrapper, array(\\n\\t\'schema\' => $sitemapSchema,\\n\\t\'output\' => $output,\\n\\t\'items\' => $output\\n));\\n$pdoFetch->addTime(\'Rows wrapped\');\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"pdoSitemapLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($forceXML)) {\\n\\theader(\\"Content-Type:text\\/xml\\");\\n\\techo $output;\\n\\t@session_write_close();\\n\\texit();\\n}\\nelse {\\n\\treturn $output;\\n}"}',
        'guid' => 'b2de21ff56469175cfaf566b2f283bc9',
        'native_key' => 0,
        'signature' => '4169f3922595a572f55668ab41de9fa5',
      ),
      'b00697d6cde155a6b7e760526b321086' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoNeighbors","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (empty($id)) {$id = $modx->resource->id;}\\nif (empty($limit)) {$limit = 1;}\\nif (!isset($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n$fastMode = !empty($fastMode);\\n\\n$class = \'modResource\';\\n$resource = ($id == $modx->resource->id)\\n\\t? $modx->resource\\n\\t: $modx->getObject($class, $id);\\nif (!$resource) {return \'\';}\\n\\n\\/\\/ We need to determine ids of neighbors\\n$params = $scriptProperties;\\n$params[\'select\'] = \'id\';\\n$params[\'limit\'] = 0;\\nif (!empty($parents)) {\\n\\t$parents = array_map(\'trim\', explode(\',\', $parents));\\n\\tif (!in_array($resource->parent, $parents)) {\\n\\t\\t$parents[] = $resource->parent;\\n\\t}\\n\\t$key = array_search($resource->parent * -1, $parents);\\n\\tif ($key !== false) {\\n\\t\\tunset($parents[$key]);\\n\\t}\\n\\t$params[\'parents\'] = implode(\',\', $parents);\\n\\t$ids = $pdoFetch->getCollection(\'modResource\', array(), $params);\\n\\tunset($scriptProperties[\'parents\']);\\n}\\nelse {\\n\\t$ids = $pdoFetch->getCollection(\'modResource\', array(\'parent\' => $resource->parent), $params);\\n}\\n\\n$found = false;\\n$prev = $next = array();\\nforeach ($ids as $v) {\\n\\tif ($v[\'id\'] == $id) {\\n\\t\\t$found = true;\\n\\t\\tcontinue;\\n\\t}\\n\\telseif (!$found) {\\n\\t\\t$prev[] = $v[\'id\'];\\n\\t}\\n\\telse {\\n\\t\\t$next[] = $v[\'id\'];\\n\\t\\tif (count($next) >= $limit) {\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n}\\n$prev = array_splice($prev, $limit * -1);\\nif (!empty($loop)) {\\n\\tif (!count($prev)) {\\n\\t\\t$v = end($ids);\\n\\t\\t$prev[] = $v[\'id\'];\\n\\t}\\n\\telse {\\n\\t\\tif (!count($next)) {\\n\\t\\t\\t$v = reset($ids);\\n\\t\\t\\t$next[] = $v[\'id\'];\\n\\t\\t}\\n\\t}\\n}\\n$ids = array_merge($prev, $next, array($resource->parent));\\n$pdoFetch->addTime(\'Found ids of neighbors: \' . implode(\',\', $ids));\\n\\n\\/\\/ Query conditions\\n$where = array($class.\'.id:IN\' => $ids);\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\nif (empty($includeContent) && empty($useWeblinkUrl)) {\\n\\t$key = array_search(\'content\', $resourceColumns);\\n\\tunset($resourceColumns[$key]);\\n}\\n$select = array($class => implode(\',\',$resourceColumns));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\\/\\/\'groupby\' => $class.\'.id\',\\n\\t\'sortby\' => $class.\'.menuindex\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'return\' => \'data\',\\n\\t\'limit\' => 0,\\n\\t\'totalVar\' => \'pdoneighbors.total\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\nunset($scriptProperties[\'limit\']);\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n\\n$rows = $pdoFetch->run();\\n$prev = array_flip($prev);\\n$next = array_flip($next);\\n\\n$output = array(\'prev\' => array(), \'up\' => array(), \'next\' => array());\\nforeach ($rows as $row) {\\n\\tif (empty($row[\'menutitle\'])) {$row[\'menutitle\'] = $row[\'pagetitle\'];}\\n\\tif (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n\\t\\t$row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n\\t\\t\\t? $modx->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), \'\', \'\', $pdoFetch->config[\'scheme\'])\\n\\t\\t\\t: $row[\'content\'];\\n\\t}\\n\\telse {\\n\\t\\t$row[\'link\'] = $modx->makeUrl($row[\'id\'], $row[\'context_key\'], \'\', $pdoFetch->config[\'scheme\']);\\n\\t}\\n\\n\\tif (isset($prev[$row[\'id\']])) {\\n\\t\\t$output[\'prev\'][] = !empty($tplPrev)\\n\\t\\t\\t? $pdoFetch->getChunk($tplPrev, $row, $fastMode)\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n\\telseif (isset($next[$row[\'id\']])) {\\n\\t\\t$output[\'next\'][] = !empty($tplNext)\\n\\t\\t\\t? $pdoFetch->getChunk($tplNext, $row, $fastMode)\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n\\telse {\\n\\t\\t$output[\'up\'][] = !empty($tplUp)\\n\\t\\t\\t? $pdoFetch->getChunk($tplUp, $row, $fastMode)\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Chunks processed\');\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoNeighborsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nforeach ($output as &$row) {\\n\\t$row = implode($outputSeparator, $row);\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output = !empty($tplWrapper)\\n\\t\\t? $pdoFetch->getChunk($tplWrapper, $output, $fastMode)\\n\\t\\t: $pdoFetch->getChunk(\'\', $output);\\n\\t$output .= $log;\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:26:{s:2:\\"id\\";a:7:{s:4:\\"name\\";s:2:\\"id\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_id\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_neighbors_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"menuindex\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"asc\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplPrev\\";a:7:{s:4:\\"name\\";s:7:\\"tplPrev\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplPrev\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:84:\\"@INLINE <span class=\\"link-prev\\"><a href=\\"[[+link]]\\">&larr; [[+menutitle]]<\\/a><\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"tplUp\\";a:7:{s:4:\\"name\\";s:5:\\"tplUp\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_tplUp\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:82:\\"@INLINE <span class=\\"link-up\\">&uarr; <a href=\\"[[+link]]\\">[[+menutitle]]<\\/a><\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplNext\\";a:7:{s:4:\\"name\\";s:7:\\"tplNext\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplNext\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:84:\\"@INLINE <span class=\\"link-next\\"><a href=\\"[[+link]]\\">[[+menutitle]] &rarr;<\\/a><\\/span>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:34:\\"pdotools_prop_neighbors_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:62:\\"@INLINE <div class=\\"neighbors\\">[[+prev]][[+up]][[+next]]<\\/div>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:36:\\"pdotools_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"loop\\";a:7:{s:4:\\"name\\";s:4:\\"loop\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_loop\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdoneighbors.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (empty($id)) {$id = $modx->resource->id;}\\nif (empty($limit)) {$limit = 1;}\\nif (!isset($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n$fastMode = !empty($fastMode);\\n\\n$class = \'modResource\';\\n$resource = ($id == $modx->resource->id)\\n\\t? $modx->resource\\n\\t: $modx->getObject($class, $id);\\nif (!$resource) {return \'\';}\\n\\n\\/\\/ We need to determine ids of neighbors\\n$params = $scriptProperties;\\n$params[\'select\'] = \'id\';\\n$params[\'limit\'] = 0;\\nif (!empty($parents)) {\\n\\t$parents = array_map(\'trim\', explode(\',\', $parents));\\n\\tif (!in_array($resource->parent, $parents)) {\\n\\t\\t$parents[] = $resource->parent;\\n\\t}\\n\\t$key = array_search($resource->parent * -1, $parents);\\n\\tif ($key !== false) {\\n\\t\\tunset($parents[$key]);\\n\\t}\\n\\t$params[\'parents\'] = implode(\',\', $parents);\\n\\t$ids = $pdoFetch->getCollection(\'modResource\', array(), $params);\\n\\tunset($scriptProperties[\'parents\']);\\n}\\nelse {\\n\\t$ids = $pdoFetch->getCollection(\'modResource\', array(\'parent\' => $resource->parent), $params);\\n}\\n\\n$found = false;\\n$prev = $next = array();\\nforeach ($ids as $v) {\\n\\tif ($v[\'id\'] == $id) {\\n\\t\\t$found = true;\\n\\t\\tcontinue;\\n\\t}\\n\\telseif (!$found) {\\n\\t\\t$prev[] = $v[\'id\'];\\n\\t}\\n\\telse {\\n\\t\\t$next[] = $v[\'id\'];\\n\\t\\tif (count($next) >= $limit) {\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t}\\n}\\n$prev = array_splice($prev, $limit * -1);\\nif (!empty($loop)) {\\n\\tif (!count($prev)) {\\n\\t\\t$v = end($ids);\\n\\t\\t$prev[] = $v[\'id\'];\\n\\t}\\n\\telse {\\n\\t\\tif (!count($next)) {\\n\\t\\t\\t$v = reset($ids);\\n\\t\\t\\t$next[] = $v[\'id\'];\\n\\t\\t}\\n\\t}\\n}\\n$ids = array_merge($prev, $next, array($resource->parent));\\n$pdoFetch->addTime(\'Found ids of neighbors: \' . implode(\',\', $ids));\\n\\n\\/\\/ Query conditions\\n$where = array($class.\'.id:IN\' => $ids);\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\nif (empty($includeContent) && empty($useWeblinkUrl)) {\\n\\t$key = array_search(\'content\', $resourceColumns);\\n\\tunset($resourceColumns[$key]);\\n}\\n$select = array($class => implode(\',\',$resourceColumns));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\\/\\/\'groupby\' => $class.\'.id\',\\n\\t\'sortby\' => $class.\'.menuindex\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'return\' => \'data\',\\n\\t\'limit\' => 0,\\n\\t\'totalVar\' => \'pdoneighbors.total\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\nunset($scriptProperties[\'limit\']);\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n\\n$rows = $pdoFetch->run();\\n$prev = array_flip($prev);\\n$next = array_flip($next);\\n\\n$output = array(\'prev\' => array(), \'up\' => array(), \'next\' => array());\\nforeach ($rows as $row) {\\n\\tif (empty($row[\'menutitle\'])) {$row[\'menutitle\'] = $row[\'pagetitle\'];}\\n\\tif (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n\\t\\t$row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n\\t\\t\\t? $modx->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), \'\', \'\', $pdoFetch->config[\'scheme\'])\\n\\t\\t\\t: $row[\'content\'];\\n\\t}\\n\\telse {\\n\\t\\t$row[\'link\'] = $modx->makeUrl($row[\'id\'], $row[\'context_key\'], \'\', $pdoFetch->config[\'scheme\']);\\n\\t}\\n\\n\\tif (isset($prev[$row[\'id\']])) {\\n\\t\\t$output[\'prev\'][] = !empty($tplPrev)\\n\\t\\t\\t? $pdoFetch->getChunk($tplPrev, $row, $fastMode)\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n\\telseif (isset($next[$row[\'id\']])) {\\n\\t\\t$output[\'next\'][] = !empty($tplNext)\\n\\t\\t\\t? $pdoFetch->getChunk($tplNext, $row, $fastMode)\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n\\telse {\\n\\t\\t$output[\'up\'][] = !empty($tplUp)\\n\\t\\t\\t? $pdoFetch->getChunk($tplUp, $row, $fastMode)\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Chunks processed\');\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"pdoNeighborsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nforeach ($output as &$row) {\\n\\t$row = implode($outputSeparator, $row);\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output = !empty($tplWrapper)\\n\\t\\t? $pdoFetch->getChunk($tplWrapper, $output, $fastMode)\\n\\t\\t: $pdoFetch->getChunk(\'\', $output);\\n\\t$output .= $log;\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => 'efad1cac612b8e98571b8ca4b3403be2',
        'native_key' => 0,
        'signature' => '218bfcbd960ea62f64b92109a94facdf',
      ),
      'b80568ec874d455087b8b4a7cce64020' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoPage","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\/\\/ Default variables\\nif (empty($pageVarKey)) {$pageVarKey = \'page\';}\\nif (empty($pageNavVar)) {$pageNavVar = \'page.nav\';}\\nif (empty($pageCountVar)) {$pageCountVar = \'pageCount\';}\\nif (empty($totalVar)) {$totalVar = \'total\';}\\nif (empty($page)) {$page = 1;}\\nif (empty($pageLimit)) {$pageLimit = 5;} else {$pageLimit = (integer) $pageLimit;}\\nif (!isset($plPrefix)) {$plPrefix = \'\';}\\nif (!empty($scriptProperties[\'ajaxMode\'])) {$scriptProperties[\'ajax\'] = 1;}\\n\\n\\/\\/ Convert parameters from getPage if exists\\nif (!empty($namespace)) {$plPrefix = $namespace;}\\nif (!empty($pageNavTpl)) {$scriptProperties[\'tplPage\'] = $pageNavTpl;}\\nif (!empty($pageNavOuterTpl)) {$scriptProperties[\'tplPageWrapper\'] = $pageNavOuterTpl;}\\nif (!empty($pageActiveTpl)) {$scriptProperties[\'tplPageActive\'] = $pageActiveTpl;}\\nif (!empty($pageFirstTpl)) {$scriptProperties[\'tplPageFirst\'] = $pageFirstTpl;}\\nif (!empty($pagePrevTpl)) {$scriptProperties[\'tplPagePrev\'] = $pagePrevTpl;}\\nif (!empty($pageNextTpl)) {$scriptProperties[\'tplPageNext\'] = $pageNextTpl;}\\nif (!empty($pageLastTpl)) {$scriptProperties[\'tplPageLast\'] = $pageLastTpl;}\\nif (!empty($pageSkipTpl)) {$scriptProperties[\'tplPageSkip\'] = $pageSkipTpl;}\\nif (!empty($pageNavScheme)) {$scriptProperties[\'scheme\'] = $pageNavScheme;}\\nif (!empty($cache_expires)) {$scriptProperties[\'cacheTime\'] = $cache_expires;}\\n\\/\\/---\\n\\n$isAjax = !empty($scriptProperties[\'ajax\']) && !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\nif ($isAjax && !isset($_REQUEST[$pageVarKey])) {\\n\\treturn;\\n}\\n\\n\\/** @var pdoPage $pdoPage *\\/\\n$fqn = $modx->getOption(\'pdoPage.class\', null, \'pdotools.pdopage\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoPage = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoPage = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoPage from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoPage->pdoTools->addTime(\'pdoTools loaded\');\\n\\n\\/\\/ Script and styles\\nif (!$isAjax && !empty($scriptProperties[\'ajaxMode\'])) {\\n\\t$pdoPage->loadJsCss();\\n}\\n\\/\\/ Removing of default scripts and styles so they do not overwrote nested snippet parameters\\nif ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'pdoPage\'))) {\\n\\t$properties = $snippet->get(\'properties\');\\n\\tif ($scriptProperties[\'frontend_js\'] == $properties[\'frontend_js\'][\'value\']) {\\n\\t\\tunset($scriptProperties[\'frontend_js\']);\\n\\t}\\n\\tif ($scriptProperties[\'frontend_css\'] == $properties[\'frontend_css\'][\'value\']) {\\n\\t\\tunset($scriptProperties[\'frontend_css\']);\\n\\t}\\n}\\n\\n\\/\\/ Page\\nif (isset($_REQUEST[$pageVarKey]) && (!is_numeric($_REQUEST[$pageVarKey]) || ($_REQUEST[$pageVarKey] <= 1 && !$isAjax))) {\\n\\treturn $pdoPage->redirectToFirst($isAjax);\\n}\\nelseif (!empty($_REQUEST[$pageVarKey])) {\\n\\t$page = (integer) $_REQUEST[$pageVarKey];\\n}\\n$scriptProperties[\'page\'] = $page;\\n$scriptProperties[\'request\'] = $_REQUEST;\\n\\n\\/\\/ Limit\\nif (isset($_REQUEST[\'limit\'])) {\\n\\tif (is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {\\n\\t\\t$scriptProperties[\'limit\'] = abs($_REQUEST[\'limit\']);\\n\\t}\\n\\telse {\\n\\t\\tunset($_GET[\'limit\']);\\n\\t\\treturn $pdoPage->redirectToFirst($isAjax);\\n\\t}\\n}\\nif (!empty($maxLimit) && !empty($scriptProperties[\'limit\']) && $scriptProperties[\'limit\'] > $maxLimit) {\\n\\t$scriptProperties[\'limit\'] = $maxLimit;\\n}\\n\\n\\/\\/ Offset\\n$offset = !empty($scriptProperties[\'offset\']) && $scriptProperties[\'offset\'] > 0\\n\\t? (int)$scriptProperties[\'offset\']\\n\\t: 0;\\n$scriptProperties[\'offset\'] = $page > 1\\n\\t? $scriptProperties[\'limit\'] * ($page - 1) + $offset\\n\\t: $offset;\\nif (!empty($scriptProperties[\'offset\']) && empty($scriptProperties[\'limit\'])) {\\n\\t$scriptProperties[\'limit\'] = 10000000;\\n}\\n\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\n$url = $pdoPage->getBaseUrl();\\n$output = $pagination = $total = $pageCount = \'\';\\n\\n$data = $cache\\n\\t? $pdoPage->pdoTools->getCache($scriptProperties)\\n\\t: array();\\n\\nif (empty($data)) {\\n\\tif ($object = $modx->getObject(\'modSnippet\', array(\'name\' => $scriptProperties[\'element\']))) {\\n\\t\\t$object->setCacheable(false);\\n\\n\\t\\tif (!empty($toPlaceholder)) {\\n\\t\\t\\t$object->process($scriptProperties);\\n\\t\\t\\t$output = $modx->getPlaceholder($toPlaceholder);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$output = $object->process($scriptProperties);\\n\\t\\t}\\n\\t}\\n\\telse {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[pdoPage] Could not load element \\"\'.$scriptProperties[\'element\'].\'\\"\');\\n\\t\\treturn \'\';\\n\\t}\\n\\t\\/** Pagination *\\/\\n\\t$total = (int)$modx->getPlaceholder($totalVar);\\n\\t$pageCount = !empty($scriptProperties[\'limit\']) && $total > $offset\\n\\t\\t? ceil(($total - $offset) \\/ $scriptProperties[\'limit\'])\\n\\t\\t: 0;\\n\\n\\t\\/\\/ Redirect to start if somebody specified incorrect page\\n\\tif ($page > 1 && $page > $pageCount) {\\n\\t\\treturn $pdoPage->redirectToFirst($isAjax);\\n\\t}\\n\\telseif (!empty($pageCount) && $pageCount > 1) {\\n\\t\\t$pagination = array(\\n\\t\\t\\t\'first\' => $page > 1 && !empty($tplPageFirst)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, 1, $tplPageFirst)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\'prev\' => $page > 1 && !empty($tplPagePrev)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, $page - 1, $tplPagePrev)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\'pages\' => $pageLimit >= 7 && empty($disableModernPagination)\\n\\t\\t\\t\\t? $pdoPage->buildModernPagination($page, $pageCount, $url)\\n\\t\\t\\t\\t: $pdoPage->buildClassicPagination($page, $pageCount, $url),\\n\\t\\t\\t\'next\' => $page < $pageCount && !empty($tplPageNext)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, $page + 1, $tplPageNext)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\'last\' => $page < $pageCount && !empty($tplPageLast)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, $pageCount, $tplPageLast)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t);\\n\\n\\t\\tif (!empty($pageCount)) {\\n\\t\\t\\tforeach (array(\'first\',\'prev\',\'next\',\'last\') as $v) {\\n\\t\\t\\t\\t$tpl = \'tplPage\'.ucfirst($v).\'Empty\';\\n\\t\\t\\t\\tif (!empty(${$tpl}) && empty($pagination[$v])) {\\n\\t\\t\\t\\t\\t$pagination[$v] = $pdoPage->pdoTools->getChunk(${$tpl});\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (!empty($setMeta) && !$isAjax) {\\n\\t\\t\\tif ($page > 1) {\\n\\t\\t\\t\\t$modx->regClientStartupHTMLBlock(\'<link rel=\\"prev\\" href=\\"\' . $pdoPage->makePageLink($url, $page - 1) . \'\\"\\/>\');\\n\\t\\t\\t}\\n\\t\\t\\tif ($page < $pageCount) {\\n\\t\\t\\t\\t$modx->regClientStartupHTMLBlock(\'<link rel=\\"next\\" href=\\"\' . $pdoPage->makePageLink($url, $page + 1) . \'\\"\\/>\');\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t$pagination = !empty($tplPageWrapper)\\n\\t\\t\\t? $pdoPage->pdoTools->getChunk($tplPageWrapper, $pagination)\\n\\t\\t\\t: $pdoPage->pdoTools->parseChunk(\'\', $pagination);\\n\\t}\\n\\n\\t$data = array(\\n\\t\\t\'output\' => $output,\\n\\t\\t$pageVarKey => $page,\\n\\t\\t$pageCountVar => $pageCount,\\n\\t\\t$pageNavVar => $pagination,\\n\\t\\t$totalVar => $total,\\n\\t);\\n\\tif ($cache) {\\n\\t\\t$pdoPage->pdoTools->setCache($data, $scriptProperties);\\n\\t}\\n}\\n\\nif ($isAjax) {\\n\\tif ($pageNavVar != \'pagination\') {\\n\\t\\t$data[\'pagination\'] = $data[$pageNavVar];\\n\\t\\tunset($data[$pageNavVar]);\\n\\t}\\n\\tif ($pageCountVar != \'pages\') {\\n\\t\\t$data[\'pages\'] = (int)$data[$pageCountVar];\\n\\t\\tunset($data[$pageCountVar]);\\n\\t}\\n\\tif ($pageVarKey != \'page\') {\\n\\t\\t$data[\'page\'] = (int)$data[$pageVarKey];\\n\\t\\tunset($data[$pageVarKey]);\\n\\t}\\n\\tif ($totalVar != \'total\') {\\n\\t\\t$data[\'total\'] = (int)$data[$totalVar];\\n\\t\\tunset($data[$totalVar]);\\n\\t}\\n\\n\\t@session_write_close();\\n\\texit($modx->toJSON($data));\\n}\\nelse {\\n\\t$modx->setPlaceholders($data, $plPrefix);\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $data[\'output\']);\\n\\t}\\n\\telse {\\n\\t\\treturn $data[\'output\'];\\n\\t}\\n}","locked":0,"properties":"a:38:{s:8:\\"plPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"plPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_plPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"maxLimit\\";a:7:{s:4:\\"name\\";s:8:\\"maxLimit\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_maxLimit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:100;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"page\\";a:7:{s:4:\\"name\\";s:4:\\"page\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_page\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"pageVarKey\\";a:7:{s:4:\\"name\\";s:10:\\"pageVarKey\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_pageVarKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"page\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"totalVar\\";a:7:{s:4:\\"name\\";s:8:\\"totalVar\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_totalVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"page.total\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"pageLimit\\";a:7:{s:4:\\"name\\";s:9:\\"pageLimit\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_pageLimit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:5;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"element\\";a:7:{s:4:\\"name\\";s:7:\\"element\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_element\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:12:\\"pdoResources\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"pageNavVar\\";a:7:{s:4:\\"name\\";s:10:\\"pageNavVar\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_pageNavVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"page.nav\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"pageCountVar\\";a:7:{s:4:\\"name\\";s:12:\\"pageCountVar\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_pageCountVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"pageCount\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplPage\\";a:7:{s:4:\\"name\\";s:7:\\"tplPage\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplPage\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:52:\\"@INLINE <li><a href=\\"[[+href]]\\">[[+pageNo]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"tplPageWrapper\\";a:7:{s:4:\\"name\\";s:14:\\"tplPageWrapper\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_tplPageWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:113:\\"@INLINE <div class=\\"pagination\\"><ul class=\\"pagination\\">[[+first]][[+prev]][[+pages]][[+next]][[+last]]<\\/ul><\\/div>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"tplPageActive\\";a:7:{s:4:\\"name\\";s:13:\\"tplPageActive\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_tplPageActive\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:67:\\"@INLINE <li class=\\"active\\"><a href=\\"[[+href]]\\">[[+pageNo]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplPageFirst\\";a:7:{s:4:\\"name\\";s:12:\\"tplPageFirst\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplPageFirst\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:75:\\"@INLINE <li class=\\"control\\"><a href=\\"[[+href]]\\">[[%pdopage_first]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPageLast\\";a:7:{s:4:\\"name\\";s:11:\\"tplPageLast\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPageLast\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:74:\\"@INLINE <li class=\\"control\\"><a href=\\"[[+href]]\\">[[%pdopage_last]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPagePrev\\";a:7:{s:4:\\"name\\";s:11:\\"tplPagePrev\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPagePrev\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:64:\\"@INLINE <li class=\\"control\\"><a href=\\"[[+href]]\\">&laquo;<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPageNext\\";a:7:{s:4:\\"name\\";s:11:\\"tplPageNext\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPageNext\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:64:\\"@INLINE <li class=\\"control\\"><a href=\\"[[+href]]\\">&raquo;<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplPageSkip\\";a:7:{s:4:\\"name\\";s:11:\\"tplPageSkip\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplPageSkip\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:50:\\"@INLINE <li class=\\"disabled\\"><span>...<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplPageFirstEmpty\\";a:7:{s:4:\\"name\\";s:17:\\"tplPageFirstEmpty\\";s:4:\\"desc\\";s:31:\\"pdotools_prop_tplPageFirstEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:65:\\"@INLINE <li class=\\"disabled\\"><span>[[%pdopage_first]]<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplPageLastEmpty\\";a:7:{s:4:\\"name\\";s:16:\\"tplPageLastEmpty\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplPageLastEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:64:\\"@INLINE <li class=\\"disabled\\"><span>[[%pdopage_last]]<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplPagePrevEmpty\\";a:7:{s:4:\\"name\\";s:16:\\"tplPagePrevEmpty\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplPagePrevEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:54:\\"@INLINE <li class=\\"disabled\\"><span>&laquo;<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplPageNextEmpty\\";a:7:{s:4:\\"name\\";s:16:\\"tplPageNextEmpty\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplPageNextEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:54:\\"@INLINE <li class=\\"disabled\\"><span>&raquo;<\\/span><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"cache\\";a:7:{s:4:\\"name\\";s:5:\\"cache\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_cache\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3600;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"cacheAnonymous\\";a:7:{s:4:\\"name\\";s:14:\\"cacheAnonymous\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_cacheAnonymous\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"ajax\\";a:7:{s:4:\\"name\\";s:4:\\"ajax\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_ajax\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"ajaxMode\\";a:7:{s:4:\\"name\\";s:8:\\"ajaxMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_ajaxMode\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:4:{i:0;a:2:{s:4:\\"text\\";s:4:\\"None\\";s:5:\\"value\\";s:0:\\"\\";}i:1;a:2:{s:4:\\"text\\";s:7:\\"Default\\";s:5:\\"value\\";s:7:\\"default\\";}i:2;a:2:{s:4:\\"text\\";s:6:\\"Scroll\\";s:5:\\"value\\";s:6:\\"scroll\\";}i:3;a:2:{s:4:\\"text\\";s:6:\\"Button\\";s:5:\\"value\\";s:6:\\"button\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"ajaxElemWrapper\\";a:7:{s:4:\\"name\\";s:15:\\"ajaxElemWrapper\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_ajaxElemWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"#pdopage\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"ajaxElemRows\\";a:7:{s:4:\\"name\\";s:12:\\"ajaxElemRows\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_ajaxElemRows\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"#pdopage .rows\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"ajaxElemPagination\\";a:7:{s:4:\\"name\\";s:18:\\"ajaxElemPagination\\";s:4:\\"desc\\";s:32:\\"pdotools_prop_ajaxElemPagination\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"#pdopage .pagination\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"ajaxElemLink\\";a:7:{s:4:\\"name\\";s:12:\\"ajaxElemLink\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_ajaxElemLink\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:22:\\"#pdopage .pagination a\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"ajaxElemMore\\";a:7:{s:4:\\"name\\";s:12:\\"ajaxElemMore\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_ajaxElemMore\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"#pdopage .btn-more\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"ajaxTplMore\\";a:7:{s:4:\\"name\\";s:11:\\"ajaxTplMore\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_ajaxTplMore\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:75:\\"@INLINE <button class=\\"btn btn-default btn-more\\">[[%pdopage_more]]<\\/button>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"frontend_js\\";a:7:{s:4:\\"name\\";s:11:\\"frontend_js\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_frontend_js\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:27:\\"[[+assetsUrl]]js\\/pdopage.js\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"frontend_css\\";a:7:{s:4:\\"name\\";s:12:\\"frontend_css\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_frontend_css\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:29:\\"[[+assetsUrl]]css\\/pdopage.css\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"setMeta\\";a:7:{s:4:\\"name\\";s:7:\\"setMeta\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_setMeta\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdopage.php","content":"\\/** @var array $scriptProperties *\\/\\n\\/\\/ Default variables\\nif (empty($pageVarKey)) {$pageVarKey = \'page\';}\\nif (empty($pageNavVar)) {$pageNavVar = \'page.nav\';}\\nif (empty($pageCountVar)) {$pageCountVar = \'pageCount\';}\\nif (empty($totalVar)) {$totalVar = \'total\';}\\nif (empty($page)) {$page = 1;}\\nif (empty($pageLimit)) {$pageLimit = 5;} else {$pageLimit = (integer) $pageLimit;}\\nif (!isset($plPrefix)) {$plPrefix = \'\';}\\nif (!empty($scriptProperties[\'ajaxMode\'])) {$scriptProperties[\'ajax\'] = 1;}\\n\\n\\/\\/ Convert parameters from getPage if exists\\nif (!empty($namespace)) {$plPrefix = $namespace;}\\nif (!empty($pageNavTpl)) {$scriptProperties[\'tplPage\'] = $pageNavTpl;}\\nif (!empty($pageNavOuterTpl)) {$scriptProperties[\'tplPageWrapper\'] = $pageNavOuterTpl;}\\nif (!empty($pageActiveTpl)) {$scriptProperties[\'tplPageActive\'] = $pageActiveTpl;}\\nif (!empty($pageFirstTpl)) {$scriptProperties[\'tplPageFirst\'] = $pageFirstTpl;}\\nif (!empty($pagePrevTpl)) {$scriptProperties[\'tplPagePrev\'] = $pagePrevTpl;}\\nif (!empty($pageNextTpl)) {$scriptProperties[\'tplPageNext\'] = $pageNextTpl;}\\nif (!empty($pageLastTpl)) {$scriptProperties[\'tplPageLast\'] = $pageLastTpl;}\\nif (!empty($pageSkipTpl)) {$scriptProperties[\'tplPageSkip\'] = $pageSkipTpl;}\\nif (!empty($pageNavScheme)) {$scriptProperties[\'scheme\'] = $pageNavScheme;}\\nif (!empty($cache_expires)) {$scriptProperties[\'cacheTime\'] = $cache_expires;}\\n\\/\\/---\\n\\n$isAjax = !empty($scriptProperties[\'ajax\']) && !empty($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\';\\nif ($isAjax && !isset($_REQUEST[$pageVarKey])) {\\n\\treturn;\\n}\\n\\n\\/** @var pdoPage $pdoPage *\\/\\n$fqn = $modx->getOption(\'pdoPage.class\', null, \'pdotools.pdopage\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoPage = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoPage = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoPage from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoPage->pdoTools->addTime(\'pdoTools loaded\');\\n\\n\\/\\/ Script and styles\\nif (!$isAjax && !empty($scriptProperties[\'ajaxMode\'])) {\\n\\t$pdoPage->loadJsCss();\\n}\\n\\/\\/ Removing of default scripts and styles so they do not overwrote nested snippet parameters\\nif ($snippet = $modx->getObject(\'modSnippet\', array(\'name\' => \'pdoPage\'))) {\\n\\t$properties = $snippet->get(\'properties\');\\n\\tif ($scriptProperties[\'frontend_js\'] == $properties[\'frontend_js\'][\'value\']) {\\n\\t\\tunset($scriptProperties[\'frontend_js\']);\\n\\t}\\n\\tif ($scriptProperties[\'frontend_css\'] == $properties[\'frontend_css\'][\'value\']) {\\n\\t\\tunset($scriptProperties[\'frontend_css\']);\\n\\t}\\n}\\n\\n\\/\\/ Page\\nif (isset($_REQUEST[$pageVarKey]) && (!is_numeric($_REQUEST[$pageVarKey]) || ($_REQUEST[$pageVarKey] <= 1 && !$isAjax))) {\\n\\treturn $pdoPage->redirectToFirst($isAjax);\\n}\\nelseif (!empty($_REQUEST[$pageVarKey])) {\\n\\t$page = (integer) $_REQUEST[$pageVarKey];\\n}\\n$scriptProperties[\'page\'] = $page;\\n$scriptProperties[\'request\'] = $_REQUEST;\\n\\n\\/\\/ Limit\\nif (isset($_REQUEST[\'limit\'])) {\\n\\tif (is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {\\n\\t\\t$scriptProperties[\'limit\'] = abs($_REQUEST[\'limit\']);\\n\\t}\\n\\telse {\\n\\t\\tunset($_GET[\'limit\']);\\n\\t\\treturn $pdoPage->redirectToFirst($isAjax);\\n\\t}\\n}\\nif (!empty($maxLimit) && !empty($scriptProperties[\'limit\']) && $scriptProperties[\'limit\'] > $maxLimit) {\\n\\t$scriptProperties[\'limit\'] = $maxLimit;\\n}\\n\\n\\/\\/ Offset\\n$offset = !empty($scriptProperties[\'offset\']) && $scriptProperties[\'offset\'] > 0\\n\\t? (int)$scriptProperties[\'offset\']\\n\\t: 0;\\n$scriptProperties[\'offset\'] = $page > 1\\n\\t? $scriptProperties[\'limit\'] * ($page - 1) + $offset\\n\\t: $offset;\\nif (!empty($scriptProperties[\'offset\']) && empty($scriptProperties[\'limit\'])) {\\n\\t$scriptProperties[\'limit\'] = 10000000;\\n}\\n\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\n$url = $pdoPage->getBaseUrl();\\n$output = $pagination = $total = $pageCount = \'\';\\n\\n$data = $cache\\n\\t? $pdoPage->pdoTools->getCache($scriptProperties)\\n\\t: array();\\n\\nif (empty($data)) {\\n\\tif ($object = $modx->getObject(\'modSnippet\', array(\'name\' => $scriptProperties[\'element\']))) {\\n\\t\\t$object->setCacheable(false);\\n\\n\\t\\tif (!empty($toPlaceholder)) {\\n\\t\\t\\t$object->process($scriptProperties);\\n\\t\\t\\t$output = $modx->getPlaceholder($toPlaceholder);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$output = $object->process($scriptProperties);\\n\\t\\t}\\n\\t}\\n\\telse {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[pdoPage] Could not load element \\"\'.$scriptProperties[\'element\'].\'\\"\');\\n\\t\\treturn \'\';\\n\\t}\\n\\t\\/** Pagination *\\/\\n\\t$total = (int)$modx->getPlaceholder($totalVar);\\n\\t$pageCount = !empty($scriptProperties[\'limit\']) && $total > $offset\\n\\t\\t? ceil(($total - $offset) \\/ $scriptProperties[\'limit\'])\\n\\t\\t: 0;\\n\\n\\t\\/\\/ Redirect to start if somebody specified incorrect page\\n\\tif ($page > 1 && $page > $pageCount) {\\n\\t\\treturn $pdoPage->redirectToFirst($isAjax);\\n\\t}\\n\\telseif (!empty($pageCount) && $pageCount > 1) {\\n\\t\\t$pagination = array(\\n\\t\\t\\t\'first\' => $page > 1 && !empty($tplPageFirst)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, 1, $tplPageFirst)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\'prev\' => $page > 1 && !empty($tplPagePrev)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, $page - 1, $tplPagePrev)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\'pages\' => $pageLimit >= 7 && empty($disableModernPagination)\\n\\t\\t\\t\\t? $pdoPage->buildModernPagination($page, $pageCount, $url)\\n\\t\\t\\t\\t: $pdoPage->buildClassicPagination($page, $pageCount, $url),\\n\\t\\t\\t\'next\' => $page < $pageCount && !empty($tplPageNext)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, $page + 1, $tplPageNext)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t\\t\'last\' => $page < $pageCount && !empty($tplPageLast)\\n\\t\\t\\t\\t? $pdoPage->makePageLink($url, $pageCount, $tplPageLast)\\n\\t\\t\\t\\t: \'\',\\n\\t\\t);\\n\\n\\t\\tif (!empty($pageCount)) {\\n\\t\\t\\tforeach (array(\'first\',\'prev\',\'next\',\'last\') as $v) {\\n\\t\\t\\t\\t$tpl = \'tplPage\'.ucfirst($v).\'Empty\';\\n\\t\\t\\t\\tif (!empty(${$tpl}) && empty($pagination[$v])) {\\n\\t\\t\\t\\t\\t$pagination[$v] = $pdoPage->pdoTools->getChunk(${$tpl});\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\tif (!empty($setMeta) && !$isAjax) {\\n\\t\\t\\tif ($page > 1) {\\n\\t\\t\\t\\t$modx->regClientStartupHTMLBlock(\'<link rel=\\"prev\\" href=\\"\' . $pdoPage->makePageLink($url, $page - 1) . \'\\"\\/>\');\\n\\t\\t\\t}\\n\\t\\t\\tif ($page < $pageCount) {\\n\\t\\t\\t\\t$modx->regClientStartupHTMLBlock(\'<link rel=\\"next\\" href=\\"\' . $pdoPage->makePageLink($url, $page + 1) . \'\\"\\/>\');\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t$pagination = !empty($tplPageWrapper)\\n\\t\\t\\t? $pdoPage->pdoTools->getChunk($tplPageWrapper, $pagination)\\n\\t\\t\\t: $pdoPage->pdoTools->parseChunk(\'\', $pagination);\\n\\t}\\n\\n\\t$data = array(\\n\\t\\t\'output\' => $output,\\n\\t\\t$pageVarKey => $page,\\n\\t\\t$pageCountVar => $pageCount,\\n\\t\\t$pageNavVar => $pagination,\\n\\t\\t$totalVar => $total,\\n\\t);\\n\\tif ($cache) {\\n\\t\\t$pdoPage->pdoTools->setCache($data, $scriptProperties);\\n\\t}\\n}\\n\\nif ($isAjax) {\\n\\tif ($pageNavVar != \'pagination\') {\\n\\t\\t$data[\'pagination\'] = $data[$pageNavVar];\\n\\t\\tunset($data[$pageNavVar]);\\n\\t}\\n\\tif ($pageCountVar != \'pages\') {\\n\\t\\t$data[\'pages\'] = (int)$data[$pageCountVar];\\n\\t\\tunset($data[$pageCountVar]);\\n\\t}\\n\\tif ($pageVarKey != \'page\') {\\n\\t\\t$data[\'page\'] = (int)$data[$pageVarKey];\\n\\t\\tunset($data[$pageVarKey]);\\n\\t}\\n\\tif ($totalVar != \'total\') {\\n\\t\\t$data[\'total\'] = (int)$data[$totalVar];\\n\\t\\tunset($data[$totalVar]);\\n\\t}\\n\\n\\t@session_write_close();\\n\\texit($modx->toJSON($data));\\n}\\nelse {\\n\\t$modx->setPlaceholders($data, $plPrefix);\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $data[\'output\']);\\n\\t}\\n\\telse {\\n\\t\\treturn $data[\'output\'];\\n\\t}\\n}"}',
        'guid' => '4b15b5d9befcf7f73b4ec4abd4786d30',
        'native_key' => 0,
        'signature' => 'c8567f30afdeeb45687964bc0c96c374',
      ),
      '264f2307e5925732cdf1188a341ae4f5' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoMenu","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\n\\/\\/ Convert parameters from Wayfinder if exists\\nif (isset($startId)) {\\n\\t$scriptProperties[\'parents\'] = $startId;\\n}\\nif (!empty($includeDocs)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $includeDocs));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'resources\'])) {\\n\\t\\t\\t$scriptProperties[\'resources\'] .= \',\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'resources\'] = $v;\\n\\t\\t}\\n\\t}\\n}\\nif (!empty($excludeDocs)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $excludeDocs));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'resources\'])) {\\n\\t\\t\\t$scriptProperties[\'resources\'] .= \',-\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'resources\'] = \'-\'.$v;\\n\\t\\t}\\n\\t}\\n}\\n\\nif (!empty($previewUnpublished) && $modx->hasPermission(\'view_unpublished\')) {\\n\\t$scriptProperties[\'showUnpublished\'] = 1;\\n}\\n\\n$scriptProperties[\'depth\'] = empty($level) ? 100 : abs($level) - 1;\\nif (!empty($contexts)) {$scriptProperties[\'context\'] = $contexts;}\\nif (empty($scriptProperties[\'context\'])) {$scriptProperties[\'context\'] = $modx->resource->context_key;}\\n\\n\\/\\/ Save original parents specified by user\\n$specified_parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\n\\nif ($scriptProperties[\'parents\'] === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\nelseif ($scriptProperties[\'parents\'] === 0 || $scriptProperties[\'parents\'] === \'0\') {\\n\\tif ($scriptProperties[\'depth\'] !== \'\' && $scriptProperties[\'depth\'] !== 100) {\\n\\t\\t$contexts = array_map(\'trim\', explode(\',\', $scriptProperties[\'context\']));\\n\\t\\t$parents = array();\\n\\t\\tif (!empty($scriptProperties[\'showDeleted\'])) {\\n\\t\\t\\t$pdoFetch = $modx->getService(\'pdoFetch\');\\n\\t\\t\\tforeach ($contexts as $ctx) {\\n\\t\\t\\t\\t$parents = array_merge($parents, $pdoFetch->getChildIds(\'modResource\', 0, $scriptProperties[\'depth\'], array(\'context\' => $ctx)));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tforeach ($contexts as $ctx) {\\n\\t\\t\\t\\t$parents = array_merge($parents, $modx->getChildIds(0, $scriptProperties[\'depth\'], array(\'context\' => $ctx)));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t$scriptProperties[\'parents\'] = !empty($parents) ? implode(\',\', $parents) : \'+0\';\\n\\t\\t$scriptProperties[\'depth\'] = 0;\\n\\t}\\n\\t$scriptProperties[\'includeParents\'] = 1;\\n\\t$scriptProperties[\'displayStart\'] = 0;\\n}\\nelse {\\n\\t$parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\n\\t$parents_in = $parents_out = array();\\n\\tforeach ($parents as $v) {\\n\\t\\tif (!is_numeric($v)) {continue;}\\n\\t\\tif ($v[0] == \'-\') {$parents_out[] = abs($v);}\\n\\t\\telse {$parents_in[] = abs($v);}\\n\\t}\\n\\n\\tif (empty($parents_in)) {\\n\\t\\t$scriptProperties[\'includeParents\'] = 1;\\n\\t\\t$scriptProperties[\'displayStart\'] = 0;\\n\\t}\\n}\\n\\nif (!empty($displayStart)) {$scriptProperties[\'includeParents\'] = 1;}\\nif (!empty($ph)) {$toPlaceholder = $ph;}\\nif (!empty($sortOrder)) {$scriptProperties[\'sortdir\'] = $sortOrder;}\\nif (!empty($sortBy)) {$scriptProperties[\'sortby\'] = $sortBy;}\\nif (!empty($permissions)) {$scriptProperties[\'checkPermissions\'] = $permissions;}\\nif (!empty($cacheResults)) {$scriptProperties[\'cache\'] = $cacheResults;}\\nif (!empty($ignoreHidden)) {$scriptProperties[\'showHidden\'] = $ignoreHidden;}\\n\\n$wfTemplates = array(\\n\\t\'outerTpl\' => \'tplOuter\',\\n\\t\'rowTpl\' => \'tpl\',\\n\\t\'parentRowTpl\' => \'tplParentRow\',\\n\\t\'parentRowHereTpl\' => \'tplParentRowHere\',\\n\\t\'hereTpl\' => \'tplHere\',\\n\\t\'innerTpl\' => \'tplInner\',\\n\\t\'innerRowTpl\' => \'tplInnerRow\',\\n\\t\'innerHereTpl\' => \'tplInnerHere\',\\n\\t\'activeParentRowTpl\' => \'tplParentRowActive\',\\n\\t\'categoryFoldersTpl\' => \'tplCategoryFolder\',\\n\\t\'startItemTpl\' => \'tplStart\'\\n);\\nforeach ($wfTemplates as $k => $v) {\\n\\tif (isset(${$k})) {\\n\\t\\t$scriptProperties[$v] = ${$k};\\n\\t}\\n}\\n\\/\\/---\\n\\n\\/** @var pdoMenu $pdoMenu *\\/\\n$fqn = $modx->getOption(\'pdoMenu.class\', null, \'pdotools.pdomenu\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoMenu = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoMenu = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoMenu from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoMenu->pdoTools->addTime(\'pdoTools loaded\');\\n\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\nif (empty($scriptProperties[\'cache_key\'])) {\\n\\t$scriptProperties[\'cache_key\'] = \'pdomenu\\/\' . sha1(serialize($scriptProperties));\\n}\\n\\n$output = \'\';\\n$tree = array();\\nif ($cache) {\\n\\t$tree = $pdoMenu->pdoTools->getCache($scriptProperties);\\n}\\nif (empty($tree)) {\\n\\t$data = $pdoMenu->pdoTools->run();\\n\\t$data = $pdoMenu->pdoTools->buildTree($data);\\n\\t$tree = array();\\n\\tforeach ($data as $k => $v) {\\n\\t\\tif (empty($v[\'id\'])) {\\n\\t\\t\\tif (!in_array($k, $specified_parents) && !$pdoMenu->checkResource($k)) {\\n\\t\\t\\t\\tcontinue;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$tree = array_merge($tree, $v[\'children\']);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$tree[$k] = $v;\\n\\t\\t}\\n\\t}\\n\\tif ($cache) {\\n\\t\\t$pdoMenu->pdoTools->setCache($tree, $scriptProperties);\\n\\t}\\n}\\nif (!empty($tree)) {\\n\\t$output = $pdoMenu->templateTree($tree);\\n}\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"pdoMenuLog\\">\' . print_r($pdoMenu->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}","locked":0,"properties":"a:51:{s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"level\\";a:7:{s:4:\\"name\\";s:5:\\"level\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_level\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"displayStart\\";a:7:{s:4:\\"name\\";s:12:\\"displayStart\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_displayStart\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"templates\\";a:7:{s:4:\\"name\\";s:9:\\"templates\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_templates\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"cache\\";a:7:{s:4:\\"name\\";s:5:\\"cache\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_cache\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3600;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"cacheAnonymous\\";a:7:{s:4:\\"name\\";s:14:\\"cacheAnonymous\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_cacheAnonymous\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"plPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"plPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_plPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"wf.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"previewUnpublished\\";a:7:{s:4:\\"name\\";s:18:\\"previewUnpublished\\";s:4:\\"desc\\";s:32:\\"pdotools_prop_previewUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"hideSubMenus\\";a:7:{s:4:\\"name\\";s:12:\\"hideSubMenus\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_hideSubMenus\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"menuindex\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"rowIdPrefix\\";a:7:{s:4:\\"name\\";s:11:\\"rowIdPrefix\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_rowIdPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"firstClass\\";a:7:{s:4:\\"name\\";s:10:\\"firstClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_firstClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"first\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"lastClass\\";a:7:{s:4:\\"name\\";s:9:\\"lastClass\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_lastClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"last\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"hereClass\\";a:7:{s:4:\\"name\\";s:9:\\"hereClass\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_hereClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:6:\\"active\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"parentClass\\";a:7:{s:4:\\"name\\";s:11:\\"parentClass\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_parentClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"rowClass\\";a:7:{s:4:\\"name\\";s:8:\\"rowClass\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_rowClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"outerClass\\";a:7:{s:4:\\"name\\";s:10:\\"outerClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_outerClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"innerClass\\";a:7:{s:4:\\"name\\";s:10:\\"innerClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_innerClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"levelClass\\";a:7:{s:4:\\"name\\";s:10:\\"levelClass\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_levelClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"selfClass\\";a:7:{s:4:\\"name\\";s:9:\\"selfClass\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_selfClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"webLinkClass\\";a:7:{s:4:\\"name\\";s:12:\\"webLinkClass\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_webLinkClass\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:41:\\"@INLINE <ul[[+classes]]>[[+wrapper]]<\\/ul>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:95:\\"@INLINE <li[[+classes]]><a href=\\"[[+link]]\\" [[+attributes]]>[[+menutitle]]<\\/a>[[+wrapper]]<\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplParentRow\\";a:7:{s:4:\\"name\\";s:12:\\"tplParentRow\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplParentRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"tplParentRowHere\\";a:7:{s:4:\\"name\\";s:16:\\"tplParentRowHere\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_tplParentRowHere\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplHere\\";a:7:{s:4:\\"name\\";s:7:\\"tplHere\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplHere\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplInner\\";a:7:{s:4:\\"name\\";s:8:\\"tplInner\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplInner\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplInnerRow\\";a:7:{s:4:\\"name\\";s:11:\\"tplInnerRow\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_tplInnerRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"tplInnerHere\\";a:7:{s:4:\\"name\\";s:12:\\"tplInnerHere\\";s:4:\\"desc\\";s:26:\\"pdotools_prop_tplInnerHere\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"tplParentRowActive\\";a:7:{s:4:\\"name\\";s:18:\\"tplParentRowActive\\";s:4:\\"desc\\";s:32:\\"pdotools_prop_tplParentRowActive\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplCategoryFolder\\";a:7:{s:4:\\"name\\";s:17:\\"tplCategoryFolder\\";s:4:\\"desc\\";s:31:\\"pdotools_prop_tplCategoryFolder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplStart\\";a:7:{s:4:\\"name\\";s:8:\\"tplStart\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplStart\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:55:\\"@INLINE <h2[[+classes]]>[[+menutitle]]<\\/h2>[[+wrapper]]\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"checkPermissions\\";a:7:{s:4:\\"name\\";s:16:\\"checkPermissions\\";s:4:\\"desc\\";s:30:\\"pdotools_prop_checkPermissions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"hereId\\";a:7:{s:4:\\"name\\";s:6:\\"hereId\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_hereId\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"select\\";a:7:{s:4:\\"name\\";s:6:\\"select\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_select\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"countChildren\\";a:7:{s:4:\\"name\\";s:13:\\"countChildren\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_countChildren\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdomenu.php","content":"\\/** @var array $scriptProperties *\\/\\n\\n\\/\\/ Convert parameters from Wayfinder if exists\\nif (isset($startId)) {\\n\\t$scriptProperties[\'parents\'] = $startId;\\n}\\nif (!empty($includeDocs)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $includeDocs));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'resources\'])) {\\n\\t\\t\\t$scriptProperties[\'resources\'] .= \',\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'resources\'] = $v;\\n\\t\\t}\\n\\t}\\n}\\nif (!empty($excludeDocs)) {\\n\\t$tmp = array_map(\'trim\', explode(\',\', $excludeDocs));\\n\\tforeach ($tmp as $v) {\\n\\t\\tif (!empty($scriptProperties[\'resources\'])) {\\n\\t\\t\\t$scriptProperties[\'resources\'] .= \',-\'.$v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$scriptProperties[\'resources\'] = \'-\'.$v;\\n\\t\\t}\\n\\t}\\n}\\n\\nif (!empty($previewUnpublished) && $modx->hasPermission(\'view_unpublished\')) {\\n\\t$scriptProperties[\'showUnpublished\'] = 1;\\n}\\n\\n$scriptProperties[\'depth\'] = empty($level) ? 100 : abs($level) - 1;\\nif (!empty($contexts)) {$scriptProperties[\'context\'] = $contexts;}\\nif (empty($scriptProperties[\'context\'])) {$scriptProperties[\'context\'] = $modx->resource->context_key;}\\n\\n\\/\\/ Save original parents specified by user\\n$specified_parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\n\\nif ($scriptProperties[\'parents\'] === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\nelseif ($scriptProperties[\'parents\'] === 0 || $scriptProperties[\'parents\'] === \'0\') {\\n\\tif ($scriptProperties[\'depth\'] !== \'\' && $scriptProperties[\'depth\'] !== 100) {\\n\\t\\t$contexts = array_map(\'trim\', explode(\',\', $scriptProperties[\'context\']));\\n\\t\\t$parents = array();\\n\\t\\tif (!empty($scriptProperties[\'showDeleted\'])) {\\n\\t\\t\\t$pdoFetch = $modx->getService(\'pdoFetch\');\\n\\t\\t\\tforeach ($contexts as $ctx) {\\n\\t\\t\\t\\t$parents = array_merge($parents, $pdoFetch->getChildIds(\'modResource\', 0, $scriptProperties[\'depth\'], array(\'context\' => $ctx)));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tforeach ($contexts as $ctx) {\\n\\t\\t\\t\\t$parents = array_merge($parents, $modx->getChildIds(0, $scriptProperties[\'depth\'], array(\'context\' => $ctx)));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t$scriptProperties[\'parents\'] = !empty($parents) ? implode(\',\', $parents) : \'+0\';\\n\\t\\t$scriptProperties[\'depth\'] = 0;\\n\\t}\\n\\t$scriptProperties[\'includeParents\'] = 1;\\n\\t$scriptProperties[\'displayStart\'] = 0;\\n}\\nelse {\\n\\t$parents = array_map(\'trim\', explode(\',\', $scriptProperties[\'parents\']));\\n\\t$parents_in = $parents_out = array();\\n\\tforeach ($parents as $v) {\\n\\t\\tif (!is_numeric($v)) {continue;}\\n\\t\\tif ($v[0] == \'-\') {$parents_out[] = abs($v);}\\n\\t\\telse {$parents_in[] = abs($v);}\\n\\t}\\n\\n\\tif (empty($parents_in)) {\\n\\t\\t$scriptProperties[\'includeParents\'] = 1;\\n\\t\\t$scriptProperties[\'displayStart\'] = 0;\\n\\t}\\n}\\n\\nif (!empty($displayStart)) {$scriptProperties[\'includeParents\'] = 1;}\\nif (!empty($ph)) {$toPlaceholder = $ph;}\\nif (!empty($sortOrder)) {$scriptProperties[\'sortdir\'] = $sortOrder;}\\nif (!empty($sortBy)) {$scriptProperties[\'sortby\'] = $sortBy;}\\nif (!empty($permissions)) {$scriptProperties[\'checkPermissions\'] = $permissions;}\\nif (!empty($cacheResults)) {$scriptProperties[\'cache\'] = $cacheResults;}\\nif (!empty($ignoreHidden)) {$scriptProperties[\'showHidden\'] = $ignoreHidden;}\\n\\n$wfTemplates = array(\\n\\t\'outerTpl\' => \'tplOuter\',\\n\\t\'rowTpl\' => \'tpl\',\\n\\t\'parentRowTpl\' => \'tplParentRow\',\\n\\t\'parentRowHereTpl\' => \'tplParentRowHere\',\\n\\t\'hereTpl\' => \'tplHere\',\\n\\t\'innerTpl\' => \'tplInner\',\\n\\t\'innerRowTpl\' => \'tplInnerRow\',\\n\\t\'innerHereTpl\' => \'tplInnerHere\',\\n\\t\'activeParentRowTpl\' => \'tplParentRowActive\',\\n\\t\'categoryFoldersTpl\' => \'tplCategoryFolder\',\\n\\t\'startItemTpl\' => \'tplStart\'\\n);\\nforeach ($wfTemplates as $k => $v) {\\n\\tif (isset(${$k})) {\\n\\t\\t$scriptProperties[$v] = ${$k};\\n\\t}\\n}\\n\\/\\/---\\n\\n\\/** @var pdoMenu $pdoMenu *\\/\\n$fqn = $modx->getOption(\'pdoMenu.class\', null, \'pdotools.pdomenu\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoMenu = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoMenu = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoMenu from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoMenu->pdoTools->addTime(\'pdoTools loaded\');\\n\\n$cache = !empty($cache) || (!$modx->user->id && !empty($cacheAnonymous));\\nif (empty($scriptProperties[\'cache_key\'])) {\\n\\t$scriptProperties[\'cache_key\'] = \'pdomenu\\/\' . sha1(serialize($scriptProperties));\\n}\\n\\n$output = \'\';\\n$tree = array();\\nif ($cache) {\\n\\t$tree = $pdoMenu->pdoTools->getCache($scriptProperties);\\n}\\nif (empty($tree)) {\\n\\t$data = $pdoMenu->pdoTools->run();\\n\\t$data = $pdoMenu->pdoTools->buildTree($data);\\n\\t$tree = array();\\n\\tforeach ($data as $k => $v) {\\n\\t\\tif (empty($v[\'id\'])) {\\n\\t\\t\\tif (!in_array($k, $specified_parents) && !$pdoMenu->checkResource($k)) {\\n\\t\\t\\t\\tcontinue;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$tree = array_merge($tree, $v[\'children\']);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$tree[$k] = $v;\\n\\t\\t}\\n\\t}\\n\\tif ($cache) {\\n\\t\\t$pdoMenu->pdoTools->setCache($tree, $scriptProperties);\\n\\t}\\n}\\nif (!empty($tree)) {\\n\\t$output = $pdoMenu->templateTree($tree);\\n}\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"pdoMenuLog\\">\' . print_r($pdoMenu->pdoTools->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}"}',
        'guid' => 'c0e9d82a85dee40c692ef50b9662d5dd',
        'native_key' => 0,
        'signature' => 'b666efeb38ab970a0af94e889ab20252',
      ),
      '0000c4493267a7cd2e89d0d4e37c9a00' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"pdoTitle","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\nif (empty($outputSeparator)) {$outputSeparator = \' \\/ \';}\\nif (empty($titleField)) {$titleField = \'longtitle\';}\\nif (!empty($limit)) {$limit = (int) $limit;}\\nif (empty($limit)) {$limit = 3;}\\nif (!isset($pageVarKey)) {$pageVarKey = \'page\';}\\nif (!isset($queryVarKey)) {$queryVarKey = \'query\';}\\nif (empty($tplPages)) {$tplPages = \'@INLINE [[%pdopage_page]] [[+page]] [[%pdopage_from]] [[+pageCount]]\';}\\nif (empty($tplSearch)) {$tplSearch = \'@INLINE \\u00ab[[+mse2_query]]\\u00bb\';}\\nif (empty($minQuery)) {$minQuery = 3;}\\nif (empty($id)) {$id = $modx->resource->id;}\\nif (empty($cacheKey)) {$cacheKey = \'title_crumbs\';}\\nif (!isset($cacheTime)) {$cacheTime = 0;}\\n$fqn = $modx->getOption(\'pdoTools.class\', null, \'pdotools.pdotools\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoTools from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$modx->lexicon->load(\'pdotools:pdopage\');\\n\\n\\/** @var modResource $resource *\\/\\n$resource = ($id == $modx->resource->id)\\n\\t? $modx->resource\\n\\t: $modx->getObject(\'modResource\', $id);\\nif (!$resource) {return \'\';}\\n\\n$title = array();\\n$pagetitle = trim($resource->get($titleField));\\nif (empty($pagetitle)) {\\n\\t$pagetitle = $resource->get(\'pagetitle\');\\n}\\n\\n\\/\\/ Add search request if exists\\nif (!empty($_GET[$queryVarKey]) && strlen($_GET[$queryVarKey]) >= $minQuery && !empty($tplSearch)) {\\n\\t$pagetitle .= \' \' . $pdoTools->getChunk($tplSearch, array(\\n\\t\\t$queryVarKey => $modx->stripTags($_GET[$queryVarKey])\\n\\t));\\n}\\n$title[] = $pagetitle;\\n\\n\\/\\/ Add pagination if exists\\nif (!empty($_GET[$pageVarKey]) && !empty($tplPages)) {\\n\\t$title[] = $pdoTools->getChunk($tplPages, array(\\n\\t\\t\'page\' => intval($_GET[$pageVarKey])\\n\\t));\\n}\\n\\n\\/\\/ Add parents\\n$cacheKey = $resource->getCacheKey() . \'\\/\' . $cacheKey;\\n$cacheOptions = array(\'cache_key\' => $modx->getOption(\'cache_resource_key\', null, \'resource\'));\\n$crumbs = \'\';\\nif (empty($cache) || !$crumbs = $modx->cacheManager->get($cacheKey, $cacheOptions)) {\\n\\t$crumbs = $modx->runSnippet(\'pdoCrumbs\', array(\\n\\t\\t\'to\' => $resource->id,\\n\\t\\t\'limit\' => $limit,\\n\\t\\t\'outputSeparator\' => $outputSeparator,\\n\\t\\t\'showHome\' => 0,\\n\\t\\t\'showAtHome\' => 0,\\n\\t\\t\'showCurrent\' => 0,\\n\\t\\t\'direction\' => \'rtl\',\\n\\t\\t\'tpl\' => \'@INLINE [[+menutitle]]\',\\n\\t\\t\'tplCurrent\' => \'@INLINE [[+menutitle]]\',\\n\\t\\t\'tplMax\' => \'\',\\n\\t\\t\'tplHome\' => \'\',\\n\\t\\t\'tplWrapper\' => \'@INLINE [[+output]]\',\\n\\t));\\n}\\nif (!empty($crumbs)) {\\n\\tif (!empty($cache)) {\\n\\t\\t$modx->cacheManager->set($cacheKey, $crumbs, $cacheTime, $cacheOptions);\\n\\t}\\n\\t$title[] = $crumbs;\\n}\\n\\nif (!empty($registerJs)) {\\n\\t$config = array(\\n\\t\\t\'separator\' => $outputSeparator,\\n\\t\\t\'tpl\' => str_replace(array(\'[[+\', \']]\'), array(\'{\', \'}\'), $pdoTools->getChunk($tplPages))\\n\\t);\\n\\t$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">pdoTitle = \' . $modx->toJSON($config) . \';<\\/script>\', true);\\n}\\n\\nreturn implode($outputSeparator, $title);","locked":0,"properties":"a:12:{s:2:\\"id\\";a:7:{s:4:\\"name\\";s:2:\\"id\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_id\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_title_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"titleField\\";a:7:{s:4:\\"name\\";s:10:\\"titleField\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_titleField\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"longtitle\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"cache\\";a:7:{s:4:\\"name\\";s:5:\\"cache\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_title_cache\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplPages\\";a:7:{s:4:\\"name\\";s:8:\\"tplPages\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tplPages\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:68:\\"@INLINE [[%pdopage_page]] [[+page]] [[%pdopage_from]] [[+pageCount]]\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"pageVarKey\\";a:7:{s:4:\\"name\\";s:10:\\"pageVarKey\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_pageVarKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"page\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"tplSearch\\";a:7:{s:4:\\"name\\";s:9:\\"tplSearch\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_tplSearch\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:27:\\"@INLINE \\u00ab[[+mse2_query]]\\u00bb\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"queryVarKey\\";a:7:{s:4:\\"name\\";s:11:\\"queryVarKey\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_queryVarKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"query\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"minQuery\\";a:7:{s:4:\\"name\\";s:8:\\"minQuery\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_minQuery\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:35:\\"pdotools_prop_title_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\" \\/ \\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"registerJs\\";a:7:{s:4:\\"name\\";s:10:\\"registerJs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_registerJs\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdotitle.php","content":"\\/** @var array $scriptProperties *\\/\\nif (empty($outputSeparator)) {$outputSeparator = \' \\/ \';}\\nif (empty($titleField)) {$titleField = \'longtitle\';}\\nif (!empty($limit)) {$limit = (int) $limit;}\\nif (empty($limit)) {$limit = 3;}\\nif (!isset($pageVarKey)) {$pageVarKey = \'page\';}\\nif (!isset($queryVarKey)) {$queryVarKey = \'query\';}\\nif (empty($tplPages)) {$tplPages = \'@INLINE [[%pdopage_page]] [[+page]] [[%pdopage_from]] [[+pageCount]]\';}\\nif (empty($tplSearch)) {$tplSearch = \'@INLINE \\u00ab[[+mse2_query]]\\u00bb\';}\\nif (empty($minQuery)) {$minQuery = 3;}\\nif (empty($id)) {$id = $modx->resource->id;}\\nif (empty($cacheKey)) {$cacheKey = \'title_crumbs\';}\\nif (!isset($cacheTime)) {$cacheTime = 0;}\\n$fqn = $modx->getOption(\'pdoTools.class\', null, \'pdotools.pdotools\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoTools from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$modx->lexicon->load(\'pdotools:pdopage\');\\n\\n\\/** @var modResource $resource *\\/\\n$resource = ($id == $modx->resource->id)\\n\\t? $modx->resource\\n\\t: $modx->getObject(\'modResource\', $id);\\nif (!$resource) {return \'\';}\\n\\n$title = array();\\n$pagetitle = trim($resource->get($titleField));\\nif (empty($pagetitle)) {\\n\\t$pagetitle = $resource->get(\'pagetitle\');\\n}\\n\\n\\/\\/ Add search request if exists\\nif (!empty($_GET[$queryVarKey]) && strlen($_GET[$queryVarKey]) >= $minQuery && !empty($tplSearch)) {\\n\\t$pagetitle .= \' \' . $pdoTools->getChunk($tplSearch, array(\\n\\t\\t$queryVarKey => $modx->stripTags($_GET[$queryVarKey])\\n\\t));\\n}\\n$title[] = $pagetitle;\\n\\n\\/\\/ Add pagination if exists\\nif (!empty($_GET[$pageVarKey]) && !empty($tplPages)) {\\n\\t$title[] = $pdoTools->getChunk($tplPages, array(\\n\\t\\t\'page\' => intval($_GET[$pageVarKey])\\n\\t));\\n}\\n\\n\\/\\/ Add parents\\n$cacheKey = $resource->getCacheKey() . \'\\/\' . $cacheKey;\\n$cacheOptions = array(\'cache_key\' => $modx->getOption(\'cache_resource_key\', null, \'resource\'));\\n$crumbs = \'\';\\nif (empty($cache) || !$crumbs = $modx->cacheManager->get($cacheKey, $cacheOptions)) {\\n\\t$crumbs = $modx->runSnippet(\'pdoCrumbs\', array(\\n\\t\\t\'to\' => $resource->id,\\n\\t\\t\'limit\' => $limit,\\n\\t\\t\'outputSeparator\' => $outputSeparator,\\n\\t\\t\'showHome\' => 0,\\n\\t\\t\'showAtHome\' => 0,\\n\\t\\t\'showCurrent\' => 0,\\n\\t\\t\'direction\' => \'rtl\',\\n\\t\\t\'tpl\' => \'@INLINE [[+menutitle]]\',\\n\\t\\t\'tplCurrent\' => \'@INLINE [[+menutitle]]\',\\n\\t\\t\'tplMax\' => \'\',\\n\\t\\t\'tplHome\' => \'\',\\n\\t\\t\'tplWrapper\' => \'@INLINE [[+output]]\',\\n\\t));\\n}\\nif (!empty($crumbs)) {\\n\\tif (!empty($cache)) {\\n\\t\\t$modx->cacheManager->set($cacheKey, $crumbs, $cacheTime, $cacheOptions);\\n\\t}\\n\\t$title[] = $crumbs;\\n}\\n\\nif (!empty($registerJs)) {\\n\\t$config = array(\\n\\t\\t\'separator\' => $outputSeparator,\\n\\t\\t\'tpl\' => str_replace(array(\'[[+\', \']]\'), array(\'{\', \'}\'), $pdoTools->getChunk($tplPages))\\n\\t);\\n\\t$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">pdoTitle = \' . $modx->toJSON($config) . \';<\\/script>\', true);\\n}\\n\\nreturn implode($outputSeparator, $title);"}',
        'guid' => 'd22d0cafe6b0e3ea9a7f558b1411d0ae',
        'native_key' => 0,
        'signature' => 'e50a902bfd95c8ca51c135877a2ccfc7',
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'pdotools',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"pdotools-2.1.8-pl\\/modCategory\\/19fc167055b295aedbd0e9b235bd425b\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"pdotools"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"pdotools-2.1.8-pl\\/modCategory\\/19fc167055b295aedbd0e9b235bd425b\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"pdotools"}',
    ),
    2 => 
    array (
      'type' => 'file',
      'body' => '{"source":"pdotools-2.1.8-pl\\/modCategory\\/19fc167055b295aedbd0e9b235bd425b\\/2\\/","target":"return MODX_CORE_PATH . \'model\\/modx\\/\';","name":"pdotools"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"pdotools-2.1.8-pl\\/modCategory\\/19fc167055b295aedbd0e9b235bd425b.resolve.parser.resolver","type":"php","name":"resolve.parser"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '82b938895df294a756552ed7aed86101',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '19fc167055b295aedbd0e9b235bd425b',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"pdoTools","rank":0}',
);